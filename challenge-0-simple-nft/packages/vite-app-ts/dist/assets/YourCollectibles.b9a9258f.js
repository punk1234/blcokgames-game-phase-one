var K=Object.defineProperty,X=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var W=(t,e,r)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,T=(t,e)=>{for(var r in e||(e={}))H.call(e,r)&&W(t,r,e[r]);if(M)for(var r of M(e))q.call(e,r)&&W(t,r,e[r]);return t},N=(t,e)=>X(t,J(e));var O=(t,e)=>{var r={};for(var n in t)H.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&M)for(var n of M(t))e.indexOf(n)<0&&q.call(t,n)&&(r[n]=t[n]);return r};import{b as getAugmentedNamespace,d as commonjsRequire,c as commonjsGlobal,r as react}from"./vendor.c51f11b9.js";import{u as useAppContracts,a as useContractLoader,b as useContractReader,B as Button,C as Card,A as Address,c as AddressInput}from"./Main.5c9650dc.js";import{ae as inherits_browser,af as events,X as useEthersContext}from"./App.60c17eec.js";import"./chunk-MTWSNRX5.47c61f42.js";import{j as jsxs,F as Fragment,a as jsx}from"./main.1d508b0f.js";import{s as streamBrowserify}from"./index.6d54ec71.js";import{u as util$7,r as require$$1,g as globSourceImport}from"./util.e90405b4.js";import{L as List}from"./index.388672fe.js";import"./index.714057ab.js";import"./index.e5bafa42.js";import"./index.4f983354.js";import"./useBreakpoint.35fd7ef5.js";import"./Pagination.aa1b90db.js";import"./LeftOutlined.fd4c6131.js";import"./index.6519d648.js";import"./DownOutlined.9d82bf68.js";const LOAD_BASE=t=>Promise.reject(new Error(`No base found for "${t}"`));class Multibases{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||LOAD_BASE;for(const r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];const r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}}const LOAD_CODEC=t=>Promise.reject(new Error(`No codec found for "${t}"`));class Multicodecs{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||LOAD_CODEC;for(const r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e])return r[e];const n=await this._loadCodec(e);return r[e]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const LOAD_HASHER=t=>Promise.reject(new Error(`No hasher found for "${t}"`));class Multihashes{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||LOAD_HASHER;for(const r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e])return r[e];const n=await this._loadHasher(e);return r[e]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}var encode_1$3=encode$d,MSB$4=128,REST$4=127,MSBALL$3=~REST$4,INT$3=Math.pow(2,31);function encode$d(t,e,r){e=e||[],r=r||0;for(var n=r;t>=INT$3;)e[r++]=t&255|MSB$4,t/=128;for(;t&MSBALL$3;)e[r++]=t&255|MSB$4,t>>>=7;return e[r]=t|0,encode$d.bytes=r-n+1,e}var decode$j=read$3,MSB$1$3=128,REST$1$3=127;function read$3(t,e){var r=0,e=e||0,n=0,o=e,a,i=t.length;do{if(o>=i)throw read$3.bytes=0,new RangeError("Could not decode varint");a=t[o++],r+=n<28?(a&REST$1$3)<<n:(a&REST$1$3)*Math.pow(2,n),n+=7}while(a>=MSB$1$3);return read$3.bytes=o-e,r}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$3=Math.pow(2,56),N9$3=Math.pow(2,63),length$3=function(t){return t<N1$3?1:t<N2$3?2:t<N3$3?3:t<N4$3?4:t<N5$3?5:t<N6$3?6:t<N7$3?7:t<N8$3?8:t<N9$3?9:10},varint$6={encode:encode_1$3,decode:decode$j,encodingLength:length$3},_brrp_varint$2=varint$6;const decode$i=t=>[_brrp_varint$2.decode(t),_brrp_varint$2.decode.bytes],encodeTo$2=(t,e,r=0)=>(_brrp_varint$2.encode(t,e,r),e),encodingLength$2=t=>_brrp_varint$2.encodingLength(t),equals$7=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},coerce$2=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$4=t=>new TextEncoder().encode(t),toString$4=t=>new TextDecoder().decode(t),create$5=(t,e)=>{const r=e.byteLength,n=encodingLength$2(t),o=n+encodingLength$2(r),a=new Uint8Array(o+r);return encodeTo$2(t,a,0),encodeTo$2(r,a,n),a.set(e,o),new Digest$3(t,r,e,a)},decode$h=t=>{const e=coerce$2(t),[r,n]=decode$i(e),[o,a]=decode$i(e.subarray(n)),i=e.subarray(n+a);if(i.byteLength!==o)throw new Error("Incorrect length");return new Digest$3(r,o,i,e)},equals$6=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&equals$7(t.bytes,e.bytes);class Digest$3{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}var digest=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:create$5,decode:decode$h,equals:equals$6,Digest:Digest$3});function base$2(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var a=t.charAt(o),i=a.charCodeAt(0);if(r[i]!==255)throw new TypeError(a+" is ambiguous");r[i]=o}var c=t.length,u=t.charAt(0),l=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function g($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var E=0,P=0,A=0,_=$.length;A!==_&&$[A]===0;)A++,E++;for(var R=(_-A)*f+1>>>0,C=new Uint8Array(R);A!==_;){for(var v=$[A],x=0,I=R-1;(v!==0||x<P)&&I!==-1;I--,x++)v+=256*C[I]>>>0,C[I]=v%c>>>0,v=v/c>>>0;if(v!==0)throw new Error("Non-zero carry");P=x,A++}for(var k=R-P;k!==R&&C[k]===0;)k++;for(var D=u.repeat(E);k<R;++k)D+=t.charAt(C[k]);return D}function S($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var E=0;if($[E]!==" "){for(var P=0,A=0;$[E]===u;)P++,E++;for(var _=($.length-E)*l+1>>>0,R=new Uint8Array(_);$[E];){var C=r[$.charCodeAt(E)];if(C===255)return;for(var v=0,x=_-1;(C!==0||v<A)&&x!==-1;x--,v++)C+=c*R[x]>>>0,R[x]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");A=v,E++}if($[E]!==" "){for(var I=_-A;I!==_&&R[I]===0;)I++;for(var k=new Uint8Array(P+(_-I)),D=P;I!==_;)k[D++]=R[I++];return k}}}function B($){var E=S($);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:S,decode:B}}var src$5=base$2,_brrp__multiformats_scope_baseX$2=src$5;class Encoder$2{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$2{constructor(e,r,n){this.name=e,this.prefix=r,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}}class ComposedDecoder$2{constructor(e){this.decoders=e}or(e){return or$2(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$2=(t,e)=>new ComposedDecoder$2(T(T({},t.decoders||{[t.prefix]:t}),e.decoders||{[e.prefix]:e}));class Codec$2{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$2(e,r,n),this.decoder=new Decoder$2(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$3=({name:t,prefix:e,encode:r,decode:n})=>new Codec$2(t,e,r,n),baseX$2=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$2(r,e);return from$3({prefix:t,name:e,encode:n,decode:a=>coerce$2(o(a))})},decode$g=(t,e,r,n)=>{const o={};for(let f=0;f<e.length;++f)o[e[f]]=f;let a=t.length;for(;t[a-1]==="=";)--a;const i=new Uint8Array(a*r/8|0);let c=0,u=0,l=0;for(let f=0;f<a;++f){const g=o[t[f]];if(g===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|g,c+=r,c>=8&&(c-=8,i[l++]=255&u>>c)}if(c>=r||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return i},encode$c=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let a="",i=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],i+=8;i>r;)i-=r,a+=e[o&c>>i];if(i&&(a+=e[o&c<<r-i]),n)for(;a.length*r&7;)a+="=";return a},rfc4648$2=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$3({prefix:e,name:t,encode(o){return encode$c(o,n,r)},decode(o){return decode$g(o,n,r,t)}}),base58btc$4=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var base58=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base58btc:base58btc$4,base58flickr});const base32$3=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var base32$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base32:base32$3,base32upper,base32pad,base32padupper,base32hex,base32hexupper,base32hexpad,base32hexpadupper,base32z});class CID$4{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden$2,byteLength:hidden$2,code:readonly$2,version:readonly$2,multihash:readonly$2,bytes:readonly$2,_baseCache:hidden$2,asCID:hidden$2})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:r}=this;if(e!==DAG_PB_CODE$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==SHA_256_CODE$2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$4.createV0(r)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=create$5(e,r);return CID$4.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$6(this.multihash,e.multihash)}toString(e){const{bytes:r,version:n,_baseCache:o}=this;switch(n){case 0:return toStringV0$2(r,o,e||base58btc$4.encoder);default:return toStringV1$2(r,o,e||base32$3.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate$2(/^0\.0/,IS_CID_DEPRECATION$2),!!(e&&(e[cidSymbol$2]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$4)return e;if(e!=null&&e.asCID===e){const{version:r,code:n,multihash:o,bytes:a}=e;return new CID$4(r,n,o,a||encodeCID$3(r,n,o.bytes))}else if(e!=null&&e[cidSymbol$2]===!0){const{version:r,multihash:n,code:o}=e,a=decode$h(n);return CID$4.create(r,o,a)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==DAG_PB_CODE$2)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$2}) block encoding`);return new CID$4(e,r,n,n.bytes)}case 1:{const o=encodeCID$3(e,r,n.bytes);return new CID$4(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$4.create(0,DAG_PB_CODE$2,e)}static createV1(e,r){return CID$4.create(1,e,r)}static decode(e){const[r,n]=CID$4.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=CID$4.inspectBytes(e),n=r.size-r.multihashSize,o=coerce$2(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");const a=o.subarray(r.multihashSize-r.digestSize),i=new Digest$3(r.multihashCode,r.digestSize,a,o);return[r.version===0?CID$4.createV0(i):CID$4.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[g,S]=decode$i(e.subarray(r));return r+=S,g};let o=n(),a=DAG_PB_CODE$2;if(o===18?(o=0,r=0):o===1&&(a=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const i=r,c=n(),u=n(),l=r+u,f=l-i;return{version:o,codec:a,multihashCode:c,digestSize:u,multihashSize:f,size:l}}static parse(e,r){const[n,o]=parseCIDtoBytes$2(e,r),a=CID$4.decode(o);return a._baseCache.set(n,e),a}}const parseCIDtoBytes$2=(t,e)=>{switch(t[0]){case"Q":{const r=e||base58btc$4;return[base58btc$4.prefix,r.decode(`${base58btc$4.prefix}${t}`)]}case base58btc$4.prefix:{const r=e||base58btc$4;return[base58btc$4.prefix,r.decode(t)]}case base32$3.prefix:{const r=e||base32$3;return[base32$3.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0$2=(t,e,r)=>{const{prefix:n}=r;if(n!==base58btc$4.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=e.get(n);if(o==null){const a=r.encode(t).slice(1);return e.set(n,a),a}else return o},toStringV1$2=(t,e,r)=>{const{prefix:n}=r,o=e.get(n);if(o==null){const a=r.encode(t);return e.set(n,a),a}else return o},DAG_PB_CODE$2=112,SHA_256_CODE$2=18,encodeCID$3=(t,e,r)=>{const n=encodingLength$2(t),o=n+encodingLength$2(e),a=new Uint8Array(o+r.byteLength);return encodeTo$2(t,a,0),encodeTo$2(e,a,n),a.set(r,o),a},cidSymbol$2=Symbol.for("@ipld/js-cid/CID"),readonly$2={writable:!1,configurable:!1,enumerable:!0},hidden$2={writable:!1,enumerable:!1,configurable:!1},version$2="0.0.0-dev",deprecate$2=(t,e)=>{if(t.test(version$2))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION$2=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var cid=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CID:CID$4});const textDecoder$2=new TextDecoder;function decodeVarint(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const o=t[e++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,e]}function decodeBytes(t,e){let r;[r,e]=decodeVarint(t,e);const n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function decodeKey(t,e){let r;return[r,e]=decodeVarint(t,e),[r&7,r>>3,e]}function decodeLink(t){const e={},r=t.length;let n=0;for(;n<r;){let o,a;if([o,a,n]=decodeKey(t,n),a===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=decodeBytes(t,n)}else if(a===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=decodeBytes(t,n),e.Name=textDecoder$2.decode(i)}else if(a===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=decodeVarint(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${a}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(t){const e=t.length;let r=0,n,o=!1,a;for(;r<e;){let c,u;if([c,u,r]=decodeKey(t,r),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(u===1){if(a)throw new Error("protobuf: (PBNode) duplicate Data section");[a,r]=decodeBytes(t,r),n&&(o=!0)}else if(u===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let l;[l,r]=decodeBytes(t,r),n.push(decodeLink(l))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${u}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");const i={};return a&&(i.Data=a),i.Links=n||[],i}const textEncoder$3=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=encodeVarint(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){const n=textEncoder$3.encode(t.Name);r-=n.length,e.set(n,r),r=encodeVarint(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=encodeVarint(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function encodeNode(t){const e=sizeNode(t),r=new Uint8Array(e);let n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=encodeVarint(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let o=t.Links.length-1;o>=0;o--){const a=encodeLink(t.Links[o],r.subarray(0,n));n-=a,n=encodeVarint(r,n,a)-1,r[n]=18}return r}function sizeLink(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+sov(r)}if(typeof t.Name=="string"){const r=textEncoder$3.encode(t.Name).length;e+=1+r+sov(r)}return typeof t.Tsize=="number"&&(e+=1+sov(t.Tsize)),e}function sizeNode(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+sov(r)}if(t.Links)for(const r of t.Links){const n=sizeLink(r);e+=1+n+sov(n)}return e}function encodeVarint(t,e,r){e-=sov(r);const n=e;for(;r>=maxUInt32;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function sov(t){return t%2==0&&t++,Math.floor((len64(t)+6)/7)}function len64(t){let e=0;return t>=maxInt32&&(t=Math.floor(t/maxInt32),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+len8tab[t]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$2=new TextEncoder;function linkComparator(t,e){if(t===e)return 0;const r=t.Name?textEncoder$2.encode(t.Name):[],n=e.Name?textEncoder$2.encode(e.Name):[];let o=r.length,a=n.length;for(let i=0,c=Math.min(o,a);i<c;++i)if(r[i]!==n[i]){o=r[i],a=n[i];break}return o<a?-1:a<o?1:0}function hasOnlyProperties(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function asLink(t){if(typeof t.asCID=="object"){const r=CID$4.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=CID$4.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=CID$4.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=CID$4.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function prepare(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=textEncoder$2.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(asLink),e.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function validate(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(t,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(r,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!=0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&linkComparator(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(t,e=[]){return prepare({Data:t,Links:e})}function createLink(t,e,r){return asLink({Hash:r,Name:t,Tsize:e})}const name$4="dag-pb",code$4=112;function encode$b(t){validate(t);const e={};return t.Links&&(e.Links=t.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),encodeNode(e)}function decode$f(t){const e=decodeNode(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(n=>{const o={};try{o.Hash=CID$4.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),r}var dagPB=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:name$4,code:code$4,encode:encode$b,decode:decode$f,prepare,validate,createNode,createLink});const typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(isBuffer$1(t))return"Buffer";const r=getObjectType(t);return r||"Object"}function isBuffer$1(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function getObjectType(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$1=new TextDecoder,textEncoder$1=new TextEncoder;function isBuffer(t){return useBuffer&&globalThis.Buffer.isBuffer(t)}function asU8A(t){return t instanceof Uint8Array?isBuffer(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const toString$3=useBuffer?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):utf8Slice(t,e,r):(t,e,r)=>r-e>64?textDecoder$1.decode(t.subarray(e,r)):utf8Slice(t,e,r),fromString$3=useBuffer?t=>t.length>64?globalThis.Buffer.from(t):utf8ToBytes(t):t=>t.length>64?textEncoder$1.encode(t):utf8ToBytes(t),fromArray=t=>Uint8Array.from(t),slice=useBuffer?(t,e,r)=>isBuffer(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),concat$2=useBuffer?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),asU8A(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let o of t)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},alloc=useBuffer?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function compare(t,e){if(isBuffer(t)&&isBuffer(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function utf8ToBytes(t,e=1/0){let r;const n=t.length;let o=null;const a=[];for(let i=0;i<n;++i){if(r=t.charCodeAt(i),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(i+1===n){(e-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function utf8Slice(t,e,r){const n=[];for(;e<r;){const o=t[e];let a=null,i=o>239?4:o>223?3:o>191?2:1;if(e+i<=r){let c,u,l,f;switch(i){case 1:o<128&&(a=o);break;case 2:c=t[e+1],(c&192)==128&&(f=(o&31)<<6|c&63,f>127&&(a=f));break;case 3:c=t[e+1],u=t[e+2],(c&192)==128&&(u&192)==128&&(f=(o&15)<<12|(c&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:c=t[e+1],u=t[e+2],l=t[e+3],(c&192)==128&&(u&192)==128&&(l&192)==128&&(f=(o&15)<<18|(c&63)<<12|(u&63)<<6|l&63,f>65535&&f<1114112&&(a=f))}}a===null?(a=65533,i=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),e+=i}return decodeCodePointsArray(n)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(t){const e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.chunks=[],this.cursor=0,this.maxCursor=-1,this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const o=r.length-(this.maxCursor-this.cursor)-1;r.set(e,o)}else{if(r){const o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=alloc(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=slice(n,0,this.cursor)}else r=concat$2(this.chunks,this.cursor);return e&&this.reset(),r}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(t,e,r){if(t.length-e<r)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(t,e,r){assertEnoughData(t,e,1);const n=t[e];if(r.strict===!0&&n<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint16(t,e,r){assertEnoughData(t,e,2);const n=t[e]<<8|t[e+1];if(r.strict===!0&&n<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint32(t,e,r){assertEnoughData(t,e,4);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint64(t,e,r){assertEnoughData(t,e,8);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],a=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&a<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(a<=Number.MAX_SAFE_INTEGER)return Number(a);if(r.allowBigInt===!0)return a;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(t,e,r,n){return new Token(Type.uint,readUint8(t,e+1,n),2)}function decodeUint16(t,e,r,n){return new Token(Type.uint,readUint16(t,e+1,n),3)}function decodeUint32(t,e,r,n){return new Token(Type.uint,readUint32(t,e+1,n),5)}function decodeUint64(t,e,r,n){return new Token(Type.uint,readUint64(t,e+1,n),9)}function encodeUint(t,e){return encodeUintValue(t,0,e.value)}function encodeUintValue(t,e,r){if(r<uintBoundaries[0]){const n=Number(r);t.push([e|n])}else if(r<uintBoundaries[1]){const n=Number(r);t.push([e|24,n])}else if(r<uintBoundaries[2]){const n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<uintBoundaries[3]){const n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<uintBoundaries[4]){const o=[e|27,0,0,0,0,0,0,0];let a=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=a&255,a=a>>8,o[7]=a&255,a=a>>8,o[6]=a&255,a=a>>8,o[5]=a&255,o[4]=i&255,i=i>>8,o[3]=i&255,i=i>>8,o[2]=i&255,i=i>>8,o[1]=i&255,t.push(o)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function decodeNegint8(t,e,r,n){return new Token(Type.negint,-1-readUint8(t,e+1,n),2)}function decodeNegint16(t,e,r,n){return new Token(Type.negint,-1-readUint16(t,e+1,n),3)}function decodeNegint32(t,e,r,n){return new Token(Type.negint,-1-readUint32(t,e+1,n),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o!="bigint"){const a=-1-o;if(a>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,a,9)}if(n.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(o),9)}function encodeNegint(t,e){const r=e.value,n=typeof r=="bigint"?r*neg1b-pos1b:r*-1-1;encodeUintValue(t,e.type.majorEncoded,n)}encodeNegint.encodedSize=function(e){const r=e.value,n=typeof r=="bigint"?r*neg1b-pos1b:r*-1-1;return n<uintBoundaries[0]?1:n<uintBoundaries[1]?2:n<uintBoundaries[2]?3:n<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function toToken$3(t,e,r,n){assertEnoughData(t,e,r+n);const o=slice(t,e+r,e+r+n);return new Token(Type.bytes,o,r+n)}function decodeBytesCompact(t,e,r,n){return toToken$3(t,e,1,r)}function decodeBytes8(t,e,r,n){return toToken$3(t,e,2,readUint8(t,e+1,n))}function decodeBytes16(t,e,r,n){return toToken$3(t,e,3,readUint16(t,e+1,n))}function decodeBytes32(t,e,r,n){return toToken$3(t,e,5,readUint32(t,e+1,n))}function decodeBytes64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(t,e,9,o)}function tokenBytes(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Type.string?fromString$3(t.value):t.value),t.encodedBytes}function encodeBytes(t,e){const r=tokenBytes(e);encodeUintValue(t,e.type.majorEncoded,r.length),t.push(r)}encodeBytes.encodedSize=function(e){const r=tokenBytes(e);return encodeUintValue.encodedSize(r.length)+r.length};encodeBytes.compareTokens=function(e,r){return compareBytes(tokenBytes(e),tokenBytes(r))};function compareBytes(t,e){return t.length<e.length?-1:t.length>e.length?1:compare(t,e)}function toToken$2(t,e,r,n){const o=r+n;return assertEnoughData(t,e,o),new Token(Type.string,toString$3(t,e+r,e+o),o)}function decodeStringCompact(t,e,r,n){return toToken$2(t,e,1,r)}function decodeString8(t,e,r,n){return toToken$2(t,e,2,readUint8(t,e+1,n))}function decodeString16(t,e,r,n){return toToken$2(t,e,3,readUint16(t,e+1,n))}function decodeString32(t,e,r,n){return toToken$2(t,e,5,readUint32(t,e+1,n))}function decodeString64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(t,e,9,o)}const encodeString=encodeBytes;function toToken$1(t,e,r,n){return new Token(Type.array,n,r)}function decodeArrayCompact(t,e,r,n){return toToken$1(t,e,1,r)}function decodeArray8(t,e,r,n){return toToken$1(t,e,2,readUint8(t,e+1,n))}function decodeArray16(t,e,r,n){return toToken$1(t,e,3,readUint16(t,e+1,n))}function decodeArray32(t,e,r,n){return toToken$1(t,e,5,readUint32(t,e+1,n))}function decodeArray64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(t,e,9,o)}function decodeArrayIndefinite(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(t,e,1,1/0)}function encodeArray(t,e){encodeUintValue(t,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;function toToken(t,e,r,n){return new Token(Type.map,n,r)}function decodeMapCompact(t,e,r,n){return toToken(t,e,1,r)}function decodeMap8(t,e,r,n){return toToken(t,e,2,readUint8(t,e+1,n))}function decodeMap16(t,e,r,n){return toToken(t,e,3,readUint16(t,e+1,n))}function decodeMap32(t,e,r,n){return toToken(t,e,5,readUint32(t,e+1,n))}function decodeMap64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(t,e,9,o)}function decodeMapIndefinite(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(t,e,1,1/0)}function encodeMap(t,e){encodeUintValue(t,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;function decodeTagCompact(t,e,r,n){return new Token(Type.tag,r,1)}function decodeTag8(t,e,r,n){return new Token(Type.tag,readUint8(t,e+1,n),2)}function decodeTag16(t,e,r,n){return new Token(Type.tag,readUint16(t,e+1,n),3)}function decodeTag32(t,e,r,n){return new Token(Type.tag,readUint32(t,e+1,n),5)}function decodeTag64(t,e,r,n){return new Token(Type.tag,readUint64(t,e+1,n),9)}function encodeTag(t,e){encodeUintValue(t,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,t,e)}function decodeFloat16(t,e,r,n){return createToken(readFloat16(t,e+1),3,n)}function decodeFloat32(t,e,r,n){return createToken(readFloat32(t,e+1),5,n)}function decodeFloat64(t,e,r,n){return createToken(readFloat64(t,e+1),9,n)}function encodeFloat(t,e,r){const n=e.value;if(n===!1)t.push([Type.float.majorEncoded|MINOR_FALSE]);else if(n===!0)t.push([Type.float.majorEncoded|MINOR_TRUE]);else if(n===null)t.push([Type.float.majorEncoded|MINOR_NULL]);else if(n===void 0)t.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let o,a=!1;(!r||r.float64!==!0)&&(encodeFloat16(n),o=readFloat16(ui8a,1),n===o||Number.isNaN(n)?(ui8a[0]=249,t.push(ui8a.slice(0,3)),a=!0):(encodeFloat32(n),o=readFloat32(ui8a,1),n===o&&(ui8a[0]=250,t.push(ui8a.slice(0,5)),a=!0))),a||(encodeFloat64(n),o=readFloat64(ui8a,1),ui8a[0]=251,t.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,r){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;let o;if(!r||r.float64!==!0){if(encodeFloat16(n),o=readFloat16(ui8a,1),n===o||Number.isNaN(n))return 3;if(encodeFloat32(n),o=readFloat32(ui8a,1),n===o)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(t){if(t===1/0)dataView.setUint16(0,31744,!1);else if(t===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(t))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,t);const e=dataView.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)dataView.setUint16(0,31744,!1);else if(r===0)dataView.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{const o=r-127;o<-24?dataView.setUint16(0,0):o<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):dataView.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function readFloat16(t,e){if(t.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const n=r>>10&31,o=r&1023;let a;return n===0?a=o*2**-24:n!==31?a=(o+1024)*2**(n-25):a=o===0?1/0:NaN,r&32768?-a:a}function encodeFloat32(t){dataView.setFloat32(0,t,!1)}function readFloat32(t,e){if(t.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function encodeFloat64(t){dataView.setFloat64(0,t,!1)}function readFloat64(t,e){if(t.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(t,e,r){throw new Error(`${decodeErrPrefix} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function errorer(t){return()=>{throw new Error(`${decodeErrPrefix} ${t}`)}}const jump=[];for(let t=0;t<=23;t++)jump[t]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let t=32;t<=55;t++)jump[t]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let t=64;t<=87;t++)jump[t]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)jump[t]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)jump[t]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let t=160;t<=183;t++)jump[t]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let t=192;t<=215;t++)jump[t]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let t=224;t<=243;t++)jump[t]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let t=0;t<24;t++)quick[t]=new Token(Type.uint,t,1);for(let t=-1;t>=-24;t--)quick[31-t]=new Token(Type.negint,t,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(t){switch(t.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return t.value.length?void 0:fromArray([64]);case Type.string:return t.value===""?fromArray([96]):void 0;case Type.array:return t.value===0?fromArray([128]):void 0;case Type.map:return t.value===0?fromArray([160]):void 0;case Type.uint:return t.value<24?fromArray([Number(t.value)]):void 0;case Type.negint:if(t.value>=-24)return fromArray([31-Number(t.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter:mapSorter$1,quickEncodeToken},cborEncoders=[];cborEncoders[Type.uint.major]=encodeUint;cborEncoders[Type.negint.major]=encodeNegint;cborEncoders[Type.bytes.major]=encodeBytes;cborEncoders[Type.string.major]=encodeString;cborEncoders[Type.array.major]=encodeArray;cborEncoders[Type.map.major]=encodeMap;cborEncoders[Type.tag.major]=encodeTag;cborEncoders[Type.float.major]=encodeFloat;const buf=new Bl;class Ref{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(r,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Token(Type.float,t):t>=0?new Token(Type.uint,t):new Token(Type.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new Token(Type.uint,t):new Token(Type.negint,t)},Uint8Array(t,e,r,n){return new Token(Type.bytes,t)},string(t,e,r,n){return new Token(Type.string,t)},boolean(t,e,r,n){return t?simpleTokens.true:simpleTokens.false},null(t,e,r,n){return simpleTokens.null},undefined(t,e,r,n){return simpleTokens.undefined},ArrayBuffer(t,e,r,n){return new Token(Type.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new Token(Type.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;n=Ref.createCheck(n,t);const o=[];let a=0;for(const i of t)o[a++]=objectToTokens(i,r,n);return r.addBreakTokens?[new Token(Type.array,t.length),o,new Token(Type.break)]:[new Token(Type.array,t.length),o]},Object(t,e,r,n){const o=e!=="Object",a=o?t.keys():Object.keys(t),i=o?t.size:a.length;if(!i)return r.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;n=Ref.createCheck(n,t);const c=[];let u=0;for(const l of a)c[u++]=[objectToTokens(l,r,n),objectToTokens(o?t.get(l):t[l],r,n)];return sortMapEntries(c,r),r.addBreakTokens?[new Token(Type.map,i),c,new Token(Type.break)]:[new Token(Type.map,i),c]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${t}Array`]=typeEncoders.DataView;function objectToTokens(t,e={},r){const n=is(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||typeEncoders[n];if(typeof o=="function"){const i=o(t,n,e,r);if(i!=null)return i}const a=typeEncoders[n];if(!a)throw new Error(`${encodeErrPrefix} unsupported type: ${n}`);return a(t,n,e,r)}function sortMapEntries(t,e){e.mapSorter&&t.sort(e.mapSorter)}function mapSorter$1(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const o=r.type.major,a=cborEncoders[o].compareTokens(r,n);return a===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),a}function tokensToEncoded(t,e,r,n){if(Array.isArray(e))for(const o of e)tokensToEncoded(t,o,r,n);else r[e.type.major](t,e,n)}function encodeCustom(t,e,r){const n=objectToTokens(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const o=r.quickEncodeToken(n);if(o)return o;const a=e[n.type.major];if(a.encodedSize){const i=a.encodedSize(n,r),c=new Bl(i);if(a(c,n,r),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return asU8A(c.chunks[0])}}return tokensToEncoded(buf,n,e,r),buf.toBytes(!0)}function encode$a(t,e){return e=Object.assign({},defaultEncodeOptions$1,e),encodeCustom(t,cborEncoders,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let r=quick[e];if(r===void 0){const n=jump[e];if(!n)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const o=e&31;r=n(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(t,e,r){const n=[];for(let o=0;o<t.value;o++){const a=tokensToObject(e,r);if(a===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(a===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${o}, expected ${t.value})`);n[o]=a}return n}function tokenToMap(t,e,r){const n=r.useMaps===!0,o=n?void 0:{},a=n?new Map:void 0;for(let i=0;i<t.value;i++){const c=tokensToObject(e,r);if(c===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(c===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${i} [no key], expected ${t.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof c})`);const u=tokensToObject(e,r);if(u===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${i} [no value], expected ${t.value})`);n?a.set(c,u):o[c]=u}return n?a:o}function tokensToObject(t,e){if(t.done())return DONE;const r=t.next();if(r.type===Type.break)return BREAK;if(r.type.terminal)return r.value;if(r.type===Type.array)return tokenToArray(r,t,e);if(r.type===Type.map)return tokenToMap(r,t,e);if(r.type===Type.tag){if(e.tags&&typeof e.tags[r.value]=="function"){const n=tokensToObject(t,e);return e.tags[r.value](n)}throw new Error(`${decodeErrPrefix} tag not supported (${r.value})`)}throw new Error("unsupported")}function decode$e(t,e){if(!(t instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const r=e.tokenizer||new Tokeniser(t,e),n=tokensToObject(r,e);if(n===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(n===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!r.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return n}var encode_1$2=encode$9,MSB$3=128,REST$3=127,MSBALL$2=~REST$3,INT$2=Math.pow(2,31);function encode$9(t,e,r){e=e||[],r=r||0;for(var n=r;t>=INT$2;)e[r++]=t&255|MSB$3,t/=128;for(;t&MSBALL$2;)e[r++]=t&255|MSB$3,t>>>=7;return e[r]=t|0,encode$9.bytes=r-n+1,e}var decode$d=read$2,MSB$1$2=128,REST$1$2=127;function read$2(t,e){var r=0,e=e||0,n=0,o=e,a,i=t.length;do{if(o>=i)throw read$2.bytes=0,new RangeError("Could not decode varint");a=t[o++],r+=n<28?(a&REST$1$2)<<n:(a&REST$1$2)*Math.pow(2,n),n+=7}while(a>=MSB$1$2);return read$2.bytes=o-e,r}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$2=function(t){return t<N1$2?1:t<N2$2?2:t<N3$2?3:t<N4$2?4:t<N5$2?5:t<N6$2?6:t<N7$2?7:t<N8$2?8:t<N9$2?9:10},varint$5={encode:encode_1$2,decode:decode$d,encodingLength:length$2},_brrp_varint$1=varint$5;const decode$c=t=>[_brrp_varint$1.decode(t),_brrp_varint$1.decode.bytes],encodeTo$1=(t,e,r=0)=>(_brrp_varint$1.encode(t,e,r),e),encodingLength$1=t=>_brrp_varint$1.encodingLength(t),equals$5=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},coerce$1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},create$4=(t,e)=>{const r=e.byteLength,n=encodingLength$1(t),o=n+encodingLength$1(r),a=new Uint8Array(o+r);return encodeTo$1(t,a,0),encodeTo$1(r,a,n),a.set(e,o),new Digest$2(t,r,e,a)},decode$b=t=>{const e=coerce$1(t),[r,n]=decode$c(e),[o,a]=decode$c(e.subarray(n)),i=e.subarray(n+a);if(i.byteLength!==o)throw new Error("Incorrect length");return new Digest$2(r,o,i,e)},equals$4=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&equals$5(t.bytes,e.bytes);class Digest$2{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}function base$1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var a=t.charAt(o),i=a.charCodeAt(0);if(r[i]!==255)throw new TypeError(a+" is ambiguous");r[i]=o}var c=t.length,u=t.charAt(0),l=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function g($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var E=0,P=0,A=0,_=$.length;A!==_&&$[A]===0;)A++,E++;for(var R=(_-A)*f+1>>>0,C=new Uint8Array(R);A!==_;){for(var v=$[A],x=0,I=R-1;(v!==0||x<P)&&I!==-1;I--,x++)v+=256*C[I]>>>0,C[I]=v%c>>>0,v=v/c>>>0;if(v!==0)throw new Error("Non-zero carry");P=x,A++}for(var k=R-P;k!==R&&C[k]===0;)k++;for(var D=u.repeat(E);k<R;++k)D+=t.charAt(C[k]);return D}function S($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var E=0;if($[E]!==" "){for(var P=0,A=0;$[E]===u;)P++,E++;for(var _=($.length-E)*l+1>>>0,R=new Uint8Array(_);$[E];){var C=r[$.charCodeAt(E)];if(C===255)return;for(var v=0,x=_-1;(C!==0||v<A)&&x!==-1;x--,v++)C+=c*R[x]>>>0,R[x]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");A=v,E++}if($[E]!==" "){for(var I=_-A;I!==_&&R[I]===0;)I++;for(var k=new Uint8Array(P+(_-I)),D=P;I!==_;)k[D++]=R[I++];return k}}}function B($){var E=S($);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:S,decode:B}}var src$4=base$1,_brrp__multiformats_scope_baseX$1=src$4;class Encoder$1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return or$1(this,e)}}class ComposedDecoder$1{constructor(e){this.decoders=e}or(e){return or$1(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$1=(t,e)=>new ComposedDecoder$1(T(T({},t.decoders||{[t.prefix]:t}),e.decoders||{[e.prefix]:e}));class Codec$1{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$1(e,r,n),this.decoder=new Decoder$1(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$2=({name:t,prefix:e,encode:r,decode:n})=>new Codec$1(t,e,r,n),baseX$1=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$1(r,e);return from$2({prefix:t,name:e,encode:n,decode:a=>coerce$1(o(a))})},decode$a=(t,e,r,n)=>{const o={};for(let f=0;f<e.length;++f)o[e[f]]=f;let a=t.length;for(;t[a-1]==="=";)--a;const i=new Uint8Array(a*r/8|0);let c=0,u=0,l=0;for(let f=0;f<a;++f){const g=o[t[f]];if(g===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|g,c+=r,c>=8&&(c-=8,i[l++]=255&u>>c)}if(c>=r||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return i},encode$8=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let a="",i=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],i+=8;i>r;)i-=r,a+=e[o&c>>i];if(i&&(a+=e[o&c<<r-i]),n)for(;a.length*r&7;)a+="=";return a},rfc4648$1=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$2({prefix:e,name:t,encode(o){return encode$8(o,n,r)},decode(o){return decode$a(o,n,r,t)}}),base58btc$3=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$2=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});class CID$3{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden$1,byteLength:hidden$1,code:readonly$1,version:readonly$1,multihash:readonly$1,bytes:readonly$1,_baseCache:hidden$1,asCID:hidden$1})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:r}=this;if(e!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$3.createV0(r)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=create$4(e,r);return CID$3.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$4(this.multihash,e.multihash)}toString(e){const{bytes:r,version:n,_baseCache:o}=this;switch(n){case 0:return toStringV0$1(r,o,e||base58btc$3.encoder);default:return toStringV1$1(r,o,e||base32$2.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate$1(/^0\.0/,IS_CID_DEPRECATION$1),!!(e&&(e[cidSymbol$1]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$3)return e;if(e!=null&&e.asCID===e){const{version:r,code:n,multihash:o,bytes:a}=e;return new CID$3(r,n,o,a||encodeCID$2(r,n,o.bytes))}else if(e!=null&&e[cidSymbol$1]===!0){const{version:r,multihash:n,code:o}=e,a=decode$b(n);return CID$3.create(r,o,a)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new CID$3(e,r,n,n.bytes)}case 1:{const o=encodeCID$2(e,r,n.bytes);return new CID$3(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$3.create(0,DAG_PB_CODE$1,e)}static createV1(e,r){return CID$3.create(1,e,r)}static decode(e){const[r,n]=CID$3.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=CID$3.inspectBytes(e),n=r.size-r.multihashSize,o=coerce$1(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");const a=o.subarray(r.multihashSize-r.digestSize),i=new Digest$2(r.multihashCode,r.digestSize,a,o);return[r.version===0?CID$3.createV0(i):CID$3.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[g,S]=decode$c(e.subarray(r));return r+=S,g};let o=n(),a=DAG_PB_CODE$1;if(o===18?(o=0,r=0):o===1&&(a=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const i=r,c=n(),u=n(),l=r+u,f=l-i;return{version:o,codec:a,multihashCode:c,digestSize:u,multihashSize:f,size:l}}static parse(e,r){const[n,o]=parseCIDtoBytes$1(e,r),a=CID$3.decode(o);return a._baseCache.set(n,e),a}}const parseCIDtoBytes$1=(t,e)=>{switch(t[0]){case"Q":{const r=e||base58btc$3;return[base58btc$3.prefix,r.decode(`${base58btc$3.prefix}${t}`)]}case base58btc$3.prefix:{const r=e||base58btc$3;return[base58btc$3.prefix,r.decode(t)]}case base32$2.prefix:{const r=e||base32$2;return[base32$2.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0$1=(t,e,r)=>{const{prefix:n}=r;if(n!==base58btc$3.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=e.get(n);if(o==null){const a=r.encode(t).slice(1);return e.set(n,a),a}else return o},toStringV1$1=(t,e,r)=>{const{prefix:n}=r,o=e.get(n);if(o==null){const a=r.encode(t);return e.set(n,a),a}else return o},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$2=(t,e,r)=>{const n=encodingLength$1(t),o=n+encodingLength$1(e),a=new Uint8Array(o+r.byteLength);return encodeTo$1(t,a,0),encodeTo$1(e,a,n),a.set(r,o),a},cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),readonly$1={writable:!1,configurable:!1,enumerable:!0},hidden$1={writable:!1,enumerable:!1,configurable:!1},version$1="0.0.0-dev",deprecate$1=(t,e)=>{if(t.test(version$1))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION$1=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,CID_CBOR_TAG=42;function cidEncoder$1(t){if(t.asCID!==t)return null;const e=CID$3.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,r)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$3.decode(t.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG]=cidDecoder;const name$3="dag-cbor",code$3=113,encode$7=t=>encode$a(t,encodeOptions$1),decode$9=t=>decode$e(t,decodeOptions$1);var dagCBOR=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:name$3,code:code$3,encode:encode$7,decode:decode$9}),encode_1$1=encode$6,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$6(t,e,r){e=e||[],r=r||0;for(var n=r;t>=INT$1;)e[r++]=t&255|MSB$2,t/=128;for(;t&MSBALL$1;)e[r++]=t&255|MSB$2,t>>>=7;return e[r]=t|0,encode$6.bytes=r-n+1,e}var decode$8=read$1,MSB$1$1=128,REST$1$1=127;function read$1(t,e){var r=0,e=e||0,n=0,o=e,a,i=t.length;do{if(o>=i)throw read$1.bytes=0,new RangeError("Could not decode varint");a=t[o++],r+=n<28?(a&REST$1$1)<<n:(a&REST$1$1)*Math.pow(2,n),n+=7}while(a>=MSB$1$1);return read$1.bytes=o-e,r}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(t){return t<N1$1?1:t<N2$1?2:t<N3$1?3:t<N4$1?4:t<N5$1?5:t<N6$1?6:t<N7$1?7:t<N8$1?8:t<N9$1?9:10},varint$4={encode:encode_1$1,decode:decode$8,encodingLength:length$1},_brrp_varint=varint$4;const decode$7=t=>[_brrp_varint.decode(t),_brrp_varint.decode.bytes],encodeTo=(t,e,r=0)=>(_brrp_varint.encode(t,e,r),e),encodingLength=t=>_brrp_varint.encodingLength(t),equals$3=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},coerce=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},create$3=(t,e)=>{const r=e.byteLength,n=encodingLength(t),o=n+encodingLength(r),a=new Uint8Array(o+r);return encodeTo(t,a,0),encodeTo(r,a,n),a.set(e,o),new Digest$1(t,r,e,a)},decode$6=t=>{const e=coerce(t),[r,n]=decode$7(e),[o,a]=decode$7(e.subarray(n)),i=e.subarray(n+a);if(i.byteLength!==o)throw new Error("Incorrect length");return new Digest$1(r,o,i,e)},equals$2=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&equals$3(t.bytes,e.bytes);class Digest$1{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}function base(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var a=t.charAt(o),i=a.charCodeAt(0);if(r[i]!==255)throw new TypeError(a+" is ambiguous");r[i]=o}var c=t.length,u=t.charAt(0),l=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function g($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var E=0,P=0,A=0,_=$.length;A!==_&&$[A]===0;)A++,E++;for(var R=(_-A)*f+1>>>0,C=new Uint8Array(R);A!==_;){for(var v=$[A],x=0,I=R-1;(v!==0||x<P)&&I!==-1;I--,x++)v+=256*C[I]>>>0,C[I]=v%c>>>0,v=v/c>>>0;if(v!==0)throw new Error("Non-zero carry");P=x,A++}for(var k=R-P;k!==R&&C[k]===0;)k++;for(var D=u.repeat(E);k<R;++k)D+=t.charAt(C[k]);return D}function S($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var E=0;if($[E]!==" "){for(var P=0,A=0;$[E]===u;)P++,E++;for(var _=($.length-E)*l+1>>>0,R=new Uint8Array(_);$[E];){var C=r[$.charCodeAt(E)];if(C===255)return;for(var v=0,x=_-1;(C!==0||v<A)&&x!==-1;x--,v++)C+=c*R[x]>>>0,R[x]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");A=v,E++}if($[E]!==" "){for(var I=_-A;I!==_&&R[I]===0;)I++;for(var k=new Uint8Array(P+(_-I)),D=P;I!==_;)k[D++]=R[I++];return k}}}function B($){var E=S($);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:S,decode:B}}var src$3=base,_brrp__multiformats_scope_baseX=src$3;class Encoder{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,r,n){this.name=e,this.prefix=r,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(t,e)=>new ComposedDecoder(T(T({},t.decoders||{[t.prefix]:t}),e.decoders||{[e.prefix]:e}));class Codec{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder(e,r,n),this.decoder=new Decoder(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$1=({name:t,prefix:e,encode:r,decode:n})=>new Codec(t,e,r,n),baseX=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX(r,e);return from$1({prefix:t,name:e,encode:n,decode:a=>coerce(o(a))})},decode$5=(t,e,r,n)=>{const o={};for(let f=0;f<e.length;++f)o[e[f]]=f;let a=t.length;for(;t[a-1]==="=";)--a;const i=new Uint8Array(a*r/8|0);let c=0,u=0,l=0;for(let f=0;f<a;++f){const g=o[t[f]];if(g===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|g,c+=r,c>=8&&(c-=8,i[l++]=255&u>>c)}if(c>=r||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return i},encode$5=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let a="",i=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],i+=8;i>r;)i-=r,a+=e[o&c>>i];if(i&&(a+=e[o&c<<r-i]),n)for(;a.length*r&7;)a+="=";return a},rfc4648=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$1({prefix:e,name:t,encode(o){return encode$5(o,n,r)},decode(o){return decode$5(o,n,r,t)}}),base58btc$2=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$1=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});class CID$2{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly,version:readonly,multihash:readonly,bytes:readonly,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:r}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$2.createV0(r)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=create$3(e,r);return CID$2.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$2(this.multihash,e.multihash)}toString(e){const{bytes:r,version:n,_baseCache:o}=this;switch(n){case 0:return toStringV0(r,o,e||base58btc$2.encoder);default:return toStringV1(r,o,e||base32$1.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(e&&(e[cidSymbol]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$2)return e;if(e!=null&&e.asCID===e){const{version:r,code:n,multihash:o,bytes:a}=e;return new CID$2(r,n,o,a||encodeCID$1(r,n,o.bytes))}else if(e!=null&&e[cidSymbol]===!0){const{version:r,multihash:n,code:o}=e,a=decode$6(n);return CID$2.create(r,o,a)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID$2(e,r,n,n.bytes)}case 1:{const o=encodeCID$1(e,r,n.bytes);return new CID$2(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$2.create(0,DAG_PB_CODE,e)}static createV1(e,r){return CID$2.create(1,e,r)}static decode(e){const[r,n]=CID$2.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=CID$2.inspectBytes(e),n=r.size-r.multihashSize,o=coerce(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");const a=o.subarray(r.multihashSize-r.digestSize),i=new Digest$1(r.multihashCode,r.digestSize,a,o);return[r.version===0?CID$2.createV0(i):CID$2.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[g,S]=decode$7(e.subarray(r));return r+=S,g};let o=n(),a=DAG_PB_CODE;if(o===18?(o=0,r=0):o===1&&(a=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const i=r,c=n(),u=n(),l=r+u,f=l-i;return{version:o,codec:a,multihashCode:c,digestSize:u,multihashSize:f,size:l}}static parse(e,r){const[n,o]=parseCIDtoBytes(e,r),a=CID$2.decode(o);return a._baseCache.set(n,e),a}}const parseCIDtoBytes=(t,e)=>{switch(t[0]){case"Q":{const r=e||base58btc$2;return[base58btc$2.prefix,r.decode(`${base58btc$2.prefix}${t}`)]}case base58btc$2.prefix:{const r=e||base58btc$2;return[base58btc$2.prefix,r.decode(t)]}case base32$1.prefix:{const r=e||base32$1;return[base32$1.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0=(t,e,r)=>{const{prefix:n}=r;if(n!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=e.get(n);if(o==null){const a=r.encode(t).slice(1);return e.set(n,a),a}else return o},toStringV1=(t,e,r)=>{const{prefix:n}=r,o=e.get(n);if(o==null){const a=r.encode(t);return e.set(n,a),a}else return o},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID$1=(t,e,r)=>{const n=encodingLength(t),o=n+encodingLength(e),a=new Uint8Array(o+r.byteLength);return encodeTo(t,a,0),encodeTo(e,a,n),a.set(r,o),a},cidSymbol=Symbol.for("@ipld/js-cid/CID"),readonly={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version="0.0.0-dev",deprecate=(t,e)=>{if(t.test(version))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,base64$5=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});class JSONEncoder extends Array{constructor(){super();this.inRecursive=[]}prefix(e){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===Type.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===Type.map&&(r.elements++,r.elements!==1&&(r.elements%2==1?e.push([44]):e.push([58]))))}[Type.uint.major](e,r){this.prefix(e);const n=String(r.value),o=[];for(let a=0;a<n.length;a++)o[a]=n.charCodeAt(a);e.push(o)}[Type.negint.major](e,r){this[Type.uint.major](e,r)}[Type.bytes.major](e,r){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](e,r){this.prefix(e);const n=fromString$3(JSON.stringify(r.value));e.push(n.length>32?asU8A(n):n)}[Type.array.major](e,r){this.prefix(e),this.inRecursive.push({type:Type.array,elements:0}),e.push([91])}[Type.map.major](e,r){this.prefix(e),this.inRecursive.push({type:Type.map,elements:0}),e.push([123])}[Type.tag.major](e,r){}[Type.float.major](e,r){if(r.type.name==="break"){const i=this.inRecursive.pop();if(i){if(i.type===Type.array)e.push([93]);else if(i.type===Type.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}const n=String(r.value),o=[];let a=!1;for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i),!a&&(o[i]===46||o[i]===101||o[i]===69)&&(a=!0);a||(o.push(46),o.push(48)),e.push(o)}}function mapSorter(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const r=t[0],n=e[0];if(r.type!==Type.string||n.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}const defaultEncodeOptions={addBreakTokens:!0,mapSorter};function encode$4(t,e){return e=Object.assign({},defaultEncodeOptions,e),encodeCustom(t,new JSONEncoder,e)}class Tokenizer{constructor(e,r={}){this.pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this.pos}`);for(let r=0;r<e.length;r++)if(this.data[this.pos++]!==e[r])throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let r=!1,n=!1;const o=c=>{for(;!this.done();){const u=this.ch();if(c.includes(u))this.pos++;else break}};if(this.ch()===45&&(r=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,n=!0;else return new Token(Type.uint,0,this.pos-e);if(o([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===e+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);n=!0,this.pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,o([48,49,50,51,52,53,54,55,56,57]));const a=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),i=parseFloat(a);return n?new Token(Type.float,i,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new Token(i>=0?Type.uint:Type.negint,i,this.pos-e):new Token(i>=0?Type.uint:Type.negint,BigInt(a),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let a=this.pos,i=0;a<this.data.length&&i<65536;a++,i++){const c=this.data[a];if(c===92||c<32||c>=128)break;if(c===34){const u=String.fromCharCode.apply(null,this.data.subarray(this.pos,a));return this.pos=a+1,new Token(Type.string,u,i)}}const e=this.pos,r=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this.pos}`);let a=0;for(let i=0;i<4;i++){let c=this.ch();if(c>=48&&c<=57)c-=48;else if(c>=97&&c<=102)c=c-97+10;else if(c>=65&&c<=70)c=c-65+10;else throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this.pos}`);a=a*16+c,this.pos++}return a},o=()=>{const a=this.ch();let i=null,c=a>239?4:a>223?3:a>191?2:1;if(this.pos+c>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this.pos}`);let u,l,f,g;switch(c){case 1:a<128&&(i=a);break;case 2:u=this.data[this.pos+1],(u&192)==128&&(g=(a&31)<<6|u&63,g>127&&(i=g));break;case 3:u=this.data[this.pos+1],l=this.data[this.pos+2],(u&192)==128&&(l&192)==128&&(g=(a&15)<<12|(u&63)<<6|l&63,g>2047&&(g<55296||g>57343)&&(i=g));break;case 4:u=this.data[this.pos+1],l=this.data[this.pos+2],f=this.data[this.pos+3],(u&192)==128&&(l&192)==128&&(f&192)==128&&(g=(a&15)<<18|(u&63)<<12|(l&63)<<6|f&63,g>65535&&g<1114112&&(i=g))}i===null?(i=65533,c=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),this.pos+=c};for(;!this.done();){const a=this.ch();let i;switch(a){case 92:if(this.pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this.pos}`);switch(i=this.ch(),this.pos++,i){case 34:case 39:case 92:case 47:r.push(i);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Token(Type.string,decodeCodePointsArray(r),this.pos-e);default:if(a<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this.pos}`);a<128?(r.push(a),this.pos++):o()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function decode$4(t,e){return e=Object.assign({tokenizer:new Tokenizer(t,e)},e),decode$e(t,e)}function cidEncoder(t){if(t.asCID!==t)return null;const e=CID$2.asCID(t);if(!e)return null;const r=e.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,r,r.length),new Token(Type.break,void 0,1)]}function bytesEncoder(t){const e=base64$5.encode(t).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,e,e.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={typeEncoders:{Object:cidEncoder,Uint8Array:bytesEncoder,Buffer:bytesEncoder,undefined:undefinedEncoder,number:numberEncoder}};class DagJsonTokenizer extends Tokenizer{constructor(e,r){super(e,r);this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Type.map){const r=this._next();if(r.type===Type.string&&r.value==="/"){const n=this._next();if(n.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new Token(Type.tag,42,0)}if(n.type===Type.map){const o=this._next();if(o.type===Type.string&&o.value==="bytes"){const a=this._next();if(a.type===Type.string){for(let c=0;c<2;c++)if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form");const i=base64$5.decode(`m${a.value}`);return new Token(Type.bytes,i,a.value.length)}this.tokenBuffer.push(a)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[42]=CID$2.parse;const name$2="dag-json",code$2=297,encode$3=t=>encode$4(t,encodeOptions),decode$3=t=>{const e=Object.assign(decodeOptions,{tokenizer:new DagJsonTokenizer(t,decodeOptions)});return decode$4(t,e)};var dagJSON=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:name$2,code:code$2,encode:encode$3,decode:decode$3});const from=({name:t,code:e,encode:r})=>new Hasher(t,e,r);class Hasher{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}async digest(e){if(e instanceof Uint8Array){const r=await this.encode(e);return create$5(this.code,r)}else throw Error("Unknown type, must be binary type")}}const identity$1=from({name:"identity",code:0,encode:t=>coerce$2(t)});var identity$2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",identity:identity$1});const identity=from$3({prefix:"\0",name:"identity",encode:t=>toString$4(t),decode:t=>fromString$4(t)});var identityBase=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",identity});const base2=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var base2$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base2});const base8=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var base8$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base8});const base10=baseX$2({prefix:"9",name:"base10",alphabet:"0123456789"});var base10$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base10});const base16=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var base16$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base16,base16upper});const base36=baseX$2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var base36$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base36,base36upper});const base64$3=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var base64$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base64:base64$3,base64pad,base64url,base64urlpad});const sha=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256=from({name:"sha2-256",code:18,encode:sha("SHA-256")}),sha512=from({name:"sha2-512",code:19,encode:sha("SHA-512")});var sha2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",sha256,sha512});const name$1="raw",code$1=85,encode$2=t=>coerce$2(t),decode$2=t=>coerce$2(t);var raw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:name$1,code:code$1,encode:encode$2,decode:decode$2});const textEncoder=new TextEncoder,textDecoder=new TextDecoder,name="json",code=512,encode$1=t=>textEncoder.encode(JSON.stringify(t)),decode$1=t=>JSON.parse(textDecoder.decode(t));var json=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name,code,encode:encode$1,decode:decode$1});const bases=T(T(T(T(T(T(T(T(T({},identityBase),base2$1),base8$1),base10$1),base16$1),base32$4),base36$1),base58),base64$4),hashes=T(T({},sha2),identity$2),codecs={raw,json},word="[a-fA-F\\d:]",b=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${word})|(?<=${word})(?=\\s|$))`:"",v4="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v6seg="[a-fA-F\\d]{1,4}",v6=`
(?:
(?:${v6seg}:){7}(?:${v6seg}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${v6seg}:){6}(?:${v4}|:${v6seg}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${v6seg}:){5}(?::${v4}|(?::${v6seg}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${v6seg}:){4}(?:(?::${v6seg}){0,1}:${v4}|(?::${v6seg}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${v6seg}:){3}(?:(?::${v6seg}){0,2}:${v4}|(?::${v6seg}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${v6seg}:){2}(?:(?::${v6seg}){0,3}:${v4}|(?::${v6seg}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${v6seg}:){1}(?:(?::${v6seg}){0,4}:${v4}|(?::${v6seg}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${v6seg}){0,5}:${v4}|(?::${v6seg}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),v46Exact=new RegExp(`(?:^${v4}$)|(?:^${v6}$)`),v4exact=new RegExp(`^${v4}$`),v6exact=new RegExp(`^${v6}$`),ip$2=t=>t&&t.exact?v46Exact:new RegExp(`(?:${b(t)}${v4}${b(t)})|(?:${b(t)}${v6}${b(t)})`,"g");ip$2.v4=t=>t&&t.exact?v4exact:new RegExp(`${b(t)}${v4}${b(t)}`,"g");ip$2.v6=t=>t&&t.exact?v6exact:new RegExp(`${b(t)}${v6}${b(t)}`,"g");var ipRegex$1=ip$2;const ipRegex=ipRegex$1,isIp$1=t=>ipRegex({exact:!0}).test(t);isIp$1.v4=t=>ipRegex.v4({exact:!0}).test(t);isIp$1.v6=t=>ipRegex.v6({exact:!0}).test(t);isIp$1.version=t=>isIp$1(t)?isIp$1.v4(t)?4:6:void 0;var isIp_1=isIp$1;function createCodec(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const string=createCodec("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),ascii=createCodec("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),BASES=T({utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii},bases);function toString$1(t,e="utf8"){const r=BASES[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var toString$2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toString:toString$1}),require$$6=getAugmentedNamespace(toString$2);const isIp=isIp_1,{toString:uint8ArrayToString$3}=require$$6,isIP=isIp,isV4=isIp.v4,isV6=isIp.v6,toBytes$1=function(t,e,r){r=~~r;let n;if(isV4(t))n=e||new Uint8Array(r+4),t.split(/\./g).map(function(o){n[r++]=parseInt(o,10)&255});else if(isV6(t)){const o=t.split(":",8);let a;for(a=0;a<o.length;a++){const i=isV4(o[a]);let c;i&&(c=toBytes$1(o[a]),o[a]=uint8ArrayToString$3(c.slice(0,2),"base16")),c&&++a<8&&o.splice(a,0,uint8ArrayToString$3(c.slice(2,4),"base16"))}if(o[0]==="")for(;o.length<8;)o.unshift("0");else if(o[o.length-1]==="")for(;o.length<8;)o.push("0");else if(o.length<8){for(a=0;a<o.length&&o[a]!=="";a++);const i=[a,"1"];for(a=9-o.length;a>0;a--)i.push("0");o.splice.apply(o,i)}for(n=e||new Uint8Array(r+16),a=0;a<o.length;a++){const i=parseInt(o[a],16);n[r++]=i>>8&255,n[r++]=i&255}}if(!n)throw Error("Invalid ip address: "+t);return n},toString=function(t,e,r){e=~~e,r=r||t.length-e;const n=[];let o;const a=new DataView(t.buffer);if(r===4){for(let i=0;i<r;i++)n.push(t[e+i]);o=n.join(".")}else if(r===16){for(let i=0;i<r;i+=2)n.push(a.getUint16(e+i).toString(16));o=n.join(":"),o=o.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),o=o.replace(/:{3,4}/,"::")}return o};var ip$1={isIP,isV4,isV6,toBytes:toBytes$1,toString};function Protocols(t){if(typeof t=="number"){if(Protocols.codes[t])return Protocols.codes[t];throw new Error("no protocol with code: "+t)}else if(typeof t=="string"){if(Protocols.names[t])return Protocols.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}const V=-1;Protocols.lengthPrefixedVarSize=V;Protocols.V=V;Protocols.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[53,V,"dns","resolvable"],[54,V,"dns4","resolvable"],[55,V,"dns6","resolvable"],[56,V,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,"path"],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];Protocols.names={};Protocols.codes={};Protocols.table.map(t=>{const e=p.apply(null,t);return Protocols.codes[e.code]=e,Protocols.names[e.name]=e,null});Protocols.object=p;function p(t,e,r,n,o){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(o)}}var protocolsTable=Protocols,require$$3$2=getAugmentedNamespace(cid),require$$3$1=getAugmentedNamespace(base32$4),require$$4=getAugmentedNamespace(base58),require$$5=getAugmentedNamespace(digest),encode_1=encode,MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw encode.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=INT;)e[r++]=t&255|MSB$1,t/=128;for(;t&MSBALL;)e[r++]=t&255|MSB$1,t>>>=7;return e[r]=t|0,encode.bytes=r-n+1,e}var decode=read,MSB=128,REST=127;function read(t,e){var r=0,e=e||0,n=0,o=e,a,i=t.length;do{if(o>=i||n>49)throw read.bytes=0,new RangeError("Could not decode varint");a=t[o++],r+=n<28?(a&REST)<<n:(a&REST)*Math.pow(2,n),n+=7}while(a>=MSB);return read.bytes=o-e,r}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(t){return t<N1?1:t<N2?2:t<N3?3:t<N4?4:t<N5?5:t<N6?6:t<N7?7:t<N8?8:t<N9?9:10},varint$3={encode:encode_1,decode,encodingLength:length};function fromString$1(t,e="utf8"){const r=BASES[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var fromString$2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromString:fromString$1}),require$$8=getAugmentedNamespace(fromString$2);function concat(t,e){e||(e=t.reduce((o,a)=>o+a.length,0));const r=new Uint8Array(e);let n=0;for(const o of t)r.set(o,n),n+=o.length;return r}var concat$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",concat}),require$$3=getAugmentedNamespace(concat$1);const ip=ip$1,protocols$2=protocolsTable,{CID:CID$1}=require$$3$2,{base32}=require$$3$1,{base58btc:base58btc$1}=require$$4,Digest=require$$5,varint$2=varint$3,{toString:uint8ArrayToString$2}=require$$6,{fromString:uint8ArrayFromString}=require$$8,{concat:uint8ArrayConcat$1}=require$$3;var convert$2=Convert;function Convert(t,e){return e instanceof Uint8Array?Convert.toString(t,e):Convert.toBytes(t,e)}Convert.toString=function(e,r){switch(protocols$2(e).code){case 4:case 41:return bytes2ip(r);case 6:case 273:case 33:case 132:return bytes2port(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return bytes2str(r);case 421:return bytes2mh(r);case 444:return bytes2onion(r);case 445:return bytes2onion(r);default:return uint8ArrayToString$2(r,"base16")}};Convert.toBytes=function(e,r){switch(protocols$2(e).code){case 4:return ip2bytes(r);case 41:return ip2bytes(r);case 6:case 273:case 33:case 132:return port2bytes(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return str2bytes(r);case 421:return mh2bytes(r);case 444:return onion2bytes(r);case 445:return onion32bytes(r);default:return uint8ArrayFromString(r,"base16")}};function ip2bytes(t){if(!ip.isIP(t))throw new Error("invalid ip address");return ip.toBytes(t)}function bytes2ip(t){const e=ip.toString(t);if(!e||!ip.isIP(e))throw new Error("invalid ip address");return e}function port2bytes(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function bytes2port(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function str2bytes(t){const e=uint8ArrayFromString(t),r=Uint8Array.from(varint$2.encode(e.length));return uint8ArrayConcat$1([r,e],r.length+e.length)}function bytes2str(t){const e=varint$2.decode(t);if(t=t.slice(varint$2.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return uint8ArrayToString$2(t)}function mh2bytes(t){let e;t[0]==="Q"||t[0]==="1"?e=Digest.decode(base58btc$1.decode(`z${t}`)).bytes:e=CID$1.parse(t).multihash.bytes;const r=Uint8Array.from(varint$2.encode(e.length));return uint8ArrayConcat$1([r,e],r.length+e.length)}function bytes2mh(t){const e=varint$2.decode(t),r=t.slice(varint$2.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return uint8ArrayToString$2(r,"base58btc")}function onion2bytes(t){const e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");const r=base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(n);return uint8ArrayConcat$1([r,o],r.length+o.length)}function onion32bytes(t){const e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");const r=base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(n);return uint8ArrayConcat$1([r,o],r.length+o.length)}function bytes2onion(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=uint8ArrayToString$2(e,"base32"),o=bytes2port(r);return n+":"+o}const convert$1=convert$2,protocols$1=protocolsTable,varint$1=varint$3,{concat:uint8ArrayConcat}=require$$3,{toString:uint8ArrayToString$1}=require$$6;var codec$1={stringToStringTuples,stringTuplesToString,tuplesToStringTuples,stringTuplesToTuples,bytesToTuples,tuplesToBytes,bytesToString,stringToBytes,fromString,fromBytes,validateBytes,isValidBytes,cleanPath,ParseError,protoFromTuple,sizeForAddr};function stringToStringTuples(t){const e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){const o=r[n],a=protocols$1(o);if(a.size===0){e.push([o]);continue}if(n++,n>=r.length)throw ParseError("invalid address: "+t);if(a.path){e.push([o,cleanPath(r.slice(n).join("/"))]);break}e.push([o,r[n]])}return e}function stringTuplesToString(t){const e=[];return t.map(r=>{const n=protoFromTuple(r);return e.push(n.name),r.length>1&&e.push(r[1]),null}),cleanPath(e.join("/"))}function stringTuplesToTuples(t){return t.map(e=>{Array.isArray(e)||(e=[e]);const r=protoFromTuple(e);return e.length>1?[r.code,convert$1.toBytes(r.code,e[1])]:[r.code]})}function tuplesToStringTuples(t){return t.map(e=>{const r=protoFromTuple(e);return e[1]?[r.code,convert$1.toString(r.code,e[1])]:[r.code]})}function tuplesToBytes(t){return fromBytes(uint8ArrayConcat(t.map(e=>{const r=protoFromTuple(e);let n=Uint8Array.from(varint$1.encode(r.code));return e.length>1&&(n=uint8ArrayConcat([n,e[1]])),n})))}function sizeForAddr(t,e){return t.size>0?t.size/8:t.size===0?0:varint$1.decode(e)+varint$1.decode.bytes}function bytesToTuples(t){const e=[];let r=0;for(;r<t.length;){const n=varint$1.decode(t,r),o=varint$1.decode.bytes,a=protocols$1(n),i=sizeForAddr(a,t.slice(r+o));if(i===0){e.push([n]),r+=o;continue}const c=t.slice(r+o,r+o+i);if(r+=i+o,r>t.length)throw ParseError("Invalid address Uint8Array: "+uint8ArrayToString$1(t,"base16"));e.push([n,c])}return e}function bytesToString(t){const e=bytesToTuples(t),r=tuplesToStringTuples(e);return stringTuplesToString(r)}function stringToBytes(t){t=cleanPath(t);const e=stringToStringTuples(t),r=stringTuplesToTuples(e);return tuplesToBytes(r)}function fromString(t){return stringToBytes(t)}function fromBytes(t){const e=validateBytes(t);if(e)throw e;return Uint8Array.from(t)}function validateBytes(t){try{bytesToTuples(t)}catch(e){return e}}function isValidBytes(t){return validateBytes(t)===void 0}function cleanPath(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function ParseError(t){return new Error("Error parsing address: "+t)}function protoFromTuple(t){return protocols$1(t[0])}function assign(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function createError(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return assign(t,r)}catch{r.message=t.message,r.stack=t.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),assign(new o,r)}}var errCode$1=createError;function equals(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var equals$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equals}),require$$7=getAugmentedNamespace(equals$1);const codec=codec$1,protocols=protocolsTable,varint=varint$3,{CID}=require$$3$2,{base58btc}=require$$4,errCode=errCode$1,inspect=Symbol.for("nodejs.util.inspect.custom"),{toString:uint8ArrayToString}=require$$6,{equals:uint8ArrayEquals}=require$$7,resolvers=new Map,symbol=Symbol.for("@multiformats/js-multiaddr/multiaddr");class Multiaddr$1{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,symbol,{value:!0}),e instanceof Uint8Array)this.bytes=codec.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=codec.fromString(e)}else if(Multiaddr$1.isMultiaddr(e))this.bytes=codec.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return codec.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){const e={},r=this.toString().split("/");return e.family=r[1]==="ip4"?4:6,e.host=r[2],e.transport=r[3],e.port=parseInt(r[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},protocols(e)))}protoCodes(){const e=[],r=this.bytes;let n=0;for(;n<r.length;){const o=varint.decode(r,n),a=varint.decode.bytes,i=protocols(o);n+=codec.sizeForAddr(i,r.slice(n+a))+a,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return codec.bytesToTuples(this.bytes)}stringTuples(){const e=codec.bytesToTuples(this.bytes);return codec.tuplesToStringTuples(e)}encapsulate(e){return e=new Multiaddr$1(e),new Multiaddr$1(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new Multiaddr$1(n.slice(0,o))}decapsulateCode(e){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new Multiaddr$1(codec.tuplesToBytes(r.slice(0,n)));return this}getPeerId(){try{const r=this.stringTuples().filter(n=>n[0]===protocols.names.ipfs.code).pop();if(r&&r[1]){const n=r[1];return n[0]==="Q"||n[0]==="1"?uint8ArrayToString(base58btc.decode(`z${n}`),"base58btc"):uint8ArrayToString(CID.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>!!protocols(r[0]).path)[0][1],e||(e=null)}catch{e=null}return e}equals(e){return uint8ArrayEquals(this.bytes,e.bytes)}async resolve(){const e=this.protos().find(o=>o.resolvable);if(!e)return[this];const r=resolvers.get(e.name);if(!r)throw errCode(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this)).map(o=>new Multiaddr$1(o))}nodeAddress(){const e=this.protoCodes(),r=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){const r=(e||this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(e,r){if(!e)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new Multiaddr$1("/"+[n,e.address,r,e.port].join("/"))}static isName(e){return Multiaddr$1.isMultiaddr(e)?e.protos().some(r=>r.resolvable):!1}static isMultiaddr(e){return e instanceof Multiaddr$1||Boolean(e&&e[symbol])}[inspect](){return"<Multiaddr "+uint8ArrayToString(this.bytes,"base16")+" - "+codec.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+uint8ArrayToString(this.bytes,"base16")+" - "+codec.bytesToString(this.bytes)+">"}}Multiaddr$1.protocols=protocols;Multiaddr$1.resolvers=resolvers;function multiaddr(t){return new Multiaddr$1(t)}var src$2={Multiaddr:Multiaddr$1,multiaddr,protocols,resolvers};function isElectron$1(){return typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}var isElectron_1=isElectron$1;const isElectron=isElectron_1,IS_ENV_WITH_DOM=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,IS_ELECTRON=isElectron(),IS_BROWSER=IS_ENV_WITH_DOM&&!IS_ELECTRON,IS_ELECTRON_MAIN=IS_ELECTRON&&!IS_ENV_WITH_DOM,IS_ELECTRON_RENDERER=IS_ELECTRON&&IS_ENV_WITH_DOM,IS_NODE=typeof commonjsRequire=="function"&&typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!IS_ELECTRON,IS_WEBWORKER=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,IS_TEST=typeof process!="undefined"&&typeof process.env!="undefined"&&!1,IS_REACT_NATIVE=typeof navigator!="undefined"&&navigator.product==="ReactNative";var env={isTest:IS_TEST,isElectron:IS_ELECTRON,isElectronMain:IS_ELECTRON_MAIN,isElectronRenderer:IS_ELECTRON_RENDERER,isNode:IS_NODE,isBrowser:IS_BROWSER,isWebWorker:IS_WEBWORKER,isEnvWithDom:IS_ENV_WITH_DOM,isReactNative:IS_REACT_NATIVE};let durationRE=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;parse$1.nanosecond=parse$1.ns=1/1e6;parse$1.\u00B5s=parse$1.\u03BCs=parse$1.us=parse$1.microsecond=1/1e3;parse$1.millisecond=parse$1.ms=parse$1[""]=1;parse$1.second=parse$1.sec=parse$1.s=parse$1.ms*1e3;parse$1.minute=parse$1.min=parse$1.m=parse$1.s*60;parse$1.hour=parse$1.hr=parse$1.h=parse$1.m*60;parse$1.day=parse$1.d=parse$1.h*24;parse$1.week=parse$1.wk=parse$1.w=parse$1.d*7;parse$1.month=parse$1.b=parse$1.d*(365.25/12);parse$1.year=parse$1.yr=parse$1.y=parse$1.d*365.25;function parse$1(t="",e="ms"){var r=null;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(durationRE,function(n,o,a){a=unitRatio(a),a&&(r=(r||0)+parseFloat(o,10)*a)}),r&&r/(unitRatio(e)||1)}function unitRatio(t){return parse$1[t]||parse$1[t.toLowerCase().replace(/s$/,"")]}var browser$1={exports:{}},s=1e3,m=s*60,h=m*60,d=h*24,w=d*7,y=d*365.25,ms=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return parse(t);if(r==="number"&&isFinite(t))return e.long?fmtLong(t):fmtShort(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function parse(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*y;case"weeks":case"week":case"w":return r*w;case"days":case"day":case"d":return r*d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort(t){var e=Math.abs(t);return e>=d?Math.round(t/d)+"d":e>=h?Math.round(t/h)+"h":e>=m?Math.round(t/m)+"m":e>=s?Math.round(t/s)+"s":t+"ms"}function fmtLong(t){var e=Math.abs(t);return e>=d?plural(t,e,d,"day"):e>=h?plural(t,e,h,"hour"):e>=m?plural(t,e,m,"minute"):e>=s?plural(t,e,s,"second"):t+" ms"}function plural(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}function setup(t){r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=o,r.enabled=i,r.humanize=ms,r.destroy=l,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let g=0;for(let S=0;S<f.length;S++)g=(g<<5)-g+f.charCodeAt(S),g|=0;return r.colors[Math.abs(g)%r.colors.length]}r.selectColor=e;function r(f){let g,S=null,B,$;function E(...P){if(!E.enabled)return;const A=E,_=Number(new Date),R=_-(g||_);A.diff=R,A.prev=g,A.curr=_,g=_,P[0]=r.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let C=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(x,I)=>{if(x==="%%")return"%";C++;const k=r.formatters[I];if(typeof k=="function"){const D=P[C];x=k.call(A,D),P.splice(C,1),C--}return x}),r.formatArgs.call(A,P),(A.log||r.log).apply(A,P)}return E.namespace=f,E.useColors=r.useColors(),E.color=r.selectColor(f),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(B!==r.namespaces&&(B=r.namespaces,$=r.enabled(f)),$),set:P=>{S=P}}),typeof r.init=="function"&&r.init(E),E}function n(f,g){const S=r(this.namespace+(typeof g=="undefined"?":":g)+f);return S.log=this.log,S}function o(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let g;const S=(typeof f=="string"?f:"").split(/[\s,]+/),B=S.length;for(g=0;g<B;g++)!S[g]||(f=S[g].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function a(){const f=[...r.names.map(c),...r.skips.map(c).map(g=>"-"+g)].join(",");return r.enable(""),f}function i(f){if(f[f.length-1]==="*")return!0;let g,S;for(g=0,S=r.skips.length;g<S;g++)if(r.skips[g].test(f))return!1;for(g=0,S=r.names.length;g<S;g++)if(r.names[g].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var common=setup;(function(t,e){e.formatArgs=n,e.save=o,e.load=a,e.useColors=r,e.storage=i(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;u.splice(1,0,l,"color: inherit");let f=0,g=0;u[0].replace(/%[a-zA-Z%]/g,S=>{S!=="%%"&&(f++,S==="%c"&&(g=f))}),u.splice(g,0,l)}e.log=console.debug||console.log||(()=>{});function o(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function a(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process!="undefined"&&"env"in process&&(u={}.DEBUG),u}function i(){try{return localStorage}catch{}}t.exports=common(e);const{formatters:c}=t.exports;c.j=function(u){try{return JSON.stringify(u)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(browser$1,browser$1.exports);var debug=browser$1.exports,error={};class TimeoutError$2 extends Error{constructor(e="Request timed out"){super(e);this.name="TimeoutError"}}error.TimeoutError=TimeoutError$2;class AbortError$2 extends Error{constructor(e="The operation was aborted."){super(e);this.name="AbortError"}}error.AbortError=AbortError$2;class HTTPError$1 extends Error{constructor(e){super(e.statusText);this.name="HTTPError",this.response=e}}error.HTTPError=HTTPError$1;var fetch$3={exports:{}},src$1={exports:{}},httpBrowserify={exports:{}},request={exports:{}},response={exports:{}},Stream$1=streamBrowserify,util$6=util$7,Response$4=response.exports=function(t){this.offset=0,this.readable=!0};util$6.inherits(Response$4,Stream$1);var capable={streaming:!0,status2:!0};function parseHeaders$1(t){for(var e=t.getAllResponseHeaders().split(/\r?\n/),r={},n=0;n<e.length;n++){var o=e[n];if(o!==""){var a=o.match(/^([^:]+):\s*(.*)/);if(a){var i=a[1].toLowerCase(),c=a[2];r[i]!==void 0?isArray$1(r[i])?r[i].push(c):r[i]=[r[i],c]:r[i]=c}else r[o]=!0}}return r}Response$4.prototype.getResponse=function(t){var e=String(t.responseType).toLowerCase();return e==="blob"?t.responseBlob||t.response:e==="arraybuffer"?t.response:t.responseText};Response$4.prototype.getHeader=function(t){return this.headers[t.toLowerCase()]};Response$4.prototype.handle=function(t){if(t.readyState===2&&capable.status2){try{this.statusCode=t.status,this.headers=parseHeaders$1(t)}catch{capable.status2=!1}capable.status2&&this.emit("ready")}else if(capable.streaming&&t.readyState===3){try{this.statusCode||(this.statusCode=t.status,this.headers=parseHeaders$1(t),this.emit("ready"))}catch{}try{this._emitData(t)}catch{capable.streaming=!1}}else t.readyState===4&&(this.statusCode||(this.statusCode=t.status,this.emit("ready")),this._emitData(t),t.error?this.emit("error",this.getResponse(t)):this.emit("end"),this.emit("close"))};Response$4.prototype._emitData=function(t){var e=this.getResponse(t);if(e.toString().match(/ArrayBuffer/)){this.emit("data",new Uint8Array(e,this.offset)),this.offset=e.byteLength;return}e.length>this.offset&&(this.emit("data",e.slice(this.offset)),this.offset=e.length)};var isArray$1=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},base64$2={};(function(t){(function(){var e=t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(o){this.message=o}n.prototype=new Error,n.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(o){for(var a,i,c=0,u=r,l="";o.charAt(c|0)||(u="=",c%1);l+=u.charAt(63&a>>8-c%1*8)){if(i=o.charCodeAt(c+=3/4),i>255)throw new n("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");a=a<<8|i}return l}),e.atob||(e.atob=function(o){if(o=o.replace(/=+$/,""),o.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var a=0,i,c,u=0,l="";c=o.charAt(u++);~c&&(i=a%4?i*64+c:c,a++%4)?l+=String.fromCharCode(255&i>>(-2*a&6)):0)c=r.indexOf(c);return l})})()})(base64$2);var Stream=streamBrowserify,Response$3=response.exports,Base64=base64$2,inherits=inherits_browser.exports,Request$3=request.exports=function(t,e){var r=this;r.writable=!0,r.xhr=t,r.body=[],r.uri=(e.protocol||"http:")+"//"+e.host+(e.port?":"+e.port:"")+(e.path||"/"),typeof e.withCredentials=="undefined"&&(e.withCredentials=!0);try{t.withCredentials=e.withCredentials}catch{}if(e.responseType)try{t.responseType=e.responseType}catch{}if(t.open(e.method||"GET",r.uri,!0),t.onerror=function(u){r.emit("error",new Error("Network error"))},r._headers={},e.headers)for(var n=objectKeys(e.headers),o=0;o<n.length;o++){var a=n[o];if(!!r.isSafeRequestHeader(a)){var i=e.headers[a];r.setHeader(a,i)}}e.auth&&this.setHeader("Authorization","Basic "+Base64.btoa(e.auth));var c=new Response$3;c.on("close",function(){r.emit("close")}),c.on("ready",function(){r.emit("response",c)}),c.on("error",function(u){r.emit("error",u)}),t.onreadystatechange=function(){t.__aborted||c.handle(t)}};inherits(Request$3,Stream);Request$3.prototype.setHeader=function(t,e){this._headers[t.toLowerCase()]=e};Request$3.prototype.getHeader=function(t){return this._headers[t.toLowerCase()]};Request$3.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]};Request$3.prototype.write=function(t){this.body.push(t)};Request$3.prototype.destroy=function(t){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")};Request$3.prototype.end=function(t){t!==void 0&&this.body.push(t);for(var e=objectKeys(this._headers),r=0;r<e.length;r++){var n=e[r],o=this._headers[n];if(isArray(o))for(var a=0;a<o.length;a++)this.xhr.setRequestHeader(n,o[a]);else this.xhr.setRequestHeader(n,o)}if(this.body.length===0)this.xhr.send("");else if(typeof this.body[0]=="string")this.xhr.send(this.body.join(""));else if(isArray(this.body[0])){for(var i=[],r=0;r<this.body.length;r++)i.push.apply(i,this.body[r]);this.xhr.send(i)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var c=0,r=0;r<this.body.length;r++)c+=this.body[r].length;for(var i=new this.body[0].constructor(c),u=0,r=0;r<this.body.length;r++)for(var l=this.body[r],a=0;a<l.length;a++)i[u++]=l[a];this.xhr.send(i)}else if(isXHR2Compatible(this.body[0]))this.xhr.send(this.body[0]);else{for(var i="",r=0;r<this.body.length;r++)i+=this.body[r].toString();this.xhr.send(i)}};Request$3.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];Request$3.prototype.isSafeRequestHeader=function(t){return t?indexOf(Request$3.unsafeHeaders,t.toLowerCase())===-1:!1};var objectKeys=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1},isXHR2Compatible=function(t){if(typeof Blob!="undefined"&&t instanceof Blob||typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer||typeof FormData!="undefined"&&t instanceof FormData)return!0};(function(t){var e=t.exports;events.exports.EventEmitter;var r=request.exports,n=require$$1;e.request=function(a,i){typeof a=="string"&&(a=n.parse(a)),a||(a={}),!a.host&&!a.port&&(a.port=parseInt(window.location.port,10)),!a.host&&a.hostname&&(a.host=a.hostname),a.protocol||(a.scheme?a.protocol=a.scheme+":":a.protocol=window.location.protocol),a.host||(a.host=window.location.hostname||window.location.host),/:/.test(a.host)&&(a.port||(a.port=a.host.split(":")[1]),a.host=a.host.split(":")[0]),a.port||(a.port=a.protocol=="https:"?443:80);var c=new r(new o,a);return i&&c.on("response",i),c},e.get=function(a,i){a.method="GET";var c=e.request(a,i);return c.end(),c},e.Agent=function(){},e.Agent.defaultMaxSockets=4;var o=function(){if(typeof window=="undefined")throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],i=0;i<a.length;i++)try{var c=new window.ActiveXObject(a[i]);return function(){if(c){var u=c;return c=null,u}else return new window.ActiveXObject(a[i])}}catch{}throw new Error("ajax not supported in this browser")}else throw new Error("ajax not supported in this browser")}();e.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}})(httpBrowserify);var http$1=httpBrowserify.exports;const Readable=streamBrowserify.Readable,BUFFER=Symbol("buffer"),TYPE=Symbol("type");class Blob$1{constructor(){this[TYPE]="";const e=arguments[0],r=arguments[1],n=[];let o=0;if(e){const i=e,c=Number(i.length);for(let u=0;u<c;u++){const l=i[u];let f;l instanceof Buffer?f=l:ArrayBuffer.isView(l)?f=Buffer.from(l.buffer,l.byteOffset,l.byteLength):l instanceof ArrayBuffer?f=Buffer.from(l):l instanceof Blob$1?f=l[BUFFER]:f=Buffer.from(typeof l=="string"?l:String(l)),o+=f.length,n.push(f)}}this[BUFFER]=Buffer.concat(n);let a=r&&r.type!==void 0&&String(r.type).toLowerCase();a&&!/[^\u0020-\u007E]/.test(a)&&(this[TYPE]=a)}get size(){return this[BUFFER].length}get type(){return this[TYPE]}text(){return Promise.resolve(this[BUFFER].toString())}arrayBuffer(){const e=this[BUFFER],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){const e=new Readable;return e._read=function(){},e.push(this[BUFFER]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,r=arguments[0],n=arguments[1];let o,a;r===void 0?o=0:r<0?o=Math.max(e+r,0):o=Math.min(r,e),n===void 0?a=e:n<0?a=Math.max(e+n,0):a=Math.min(n,e);const i=Math.max(a-o,0),u=this[BUFFER].slice(o,o+i),l=new Blob$1([],{type:arguments[2]});return l[BUFFER]=u,l}}Object.defineProperties(Blob$1.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Object.defineProperty(Blob$1.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function FetchError(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}FetchError.prototype=Object.create(Error.prototype);FetchError.prototype.constructor=FetchError;FetchError.prototype.name="FetchError";let convert;try{convert=require("encoding").convert}catch{}const INTERNALS=Symbol("Body internals"),PassThrough=streamBrowserify.PassThrough;function Body(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let o=n===void 0?0:n;var a=r.timeout;let i=a===void 0?0:a;t==null?t=null:isURLSearchParams(t)?t=Buffer.from(t.toString()):isBlob$1(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof streamBrowserify||(t=Buffer.from(String(t)))),this[INTERNALS]={body:t,disturbed:!1,error:null},this.size=o,this.timeout=i,t instanceof streamBrowserify&&t.on("error",function(c){const u=c.name==="AbortError"?c:new FetchError(`Invalid response body while trying to fetch ${e.url}: ${c.message}`,"system",c);e[INTERNALS].error=u})}Body.prototype={get body(){return this[INTERNALS].body},get bodyUsed(){return this[INTERNALS].disturbed},arrayBuffer(){return consumeBody.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return consumeBody.call(this).then(function(e){return Object.assign(new Blob$1([],{type:t.toLowerCase()}),{[BUFFER]:e})})},json(){var t=this;return consumeBody.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return Body.Promise.reject(new FetchError(`invalid json response body at ${t.url} reason: ${r.message}`,"invalid-json"))}})},text(){return consumeBody.call(this).then(function(t){return t.toString()})},buffer(){return consumeBody.call(this)},textConverted(){var t=this;return consumeBody.call(this).then(function(e){return convertBody(e,t.headers)})}};Object.defineProperties(Body.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});Body.mixIn=function(t){for(const e of Object.getOwnPropertyNames(Body.prototype))if(!(e in t)){const r=Object.getOwnPropertyDescriptor(Body.prototype,e);Object.defineProperty(t,e,r)}};function consumeBody(){var t=this;if(this[INTERNALS].disturbed)return Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[INTERNALS].disturbed=!0,this[INTERNALS].error)return Body.Promise.reject(this[INTERNALS].error);let e=this.body;if(e===null)return Body.Promise.resolve(Buffer.alloc(0));if(isBlob$1(e)&&(e=e.stream()),Buffer.isBuffer(e))return Body.Promise.resolve(e);if(!(e instanceof streamBrowserify))return Body.Promise.resolve(Buffer.alloc(0));let r=[],n=0,o=!1;return new Body.Promise(function(a,i){let c;t.timeout&&(c=setTimeout(function(){o=!0,i(new FetchError(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(u){u.name==="AbortError"?(o=!0,i(u)):i(new FetchError(`Invalid response body while trying to fetch ${t.url}: ${u.message}`,"system",u))}),e.on("data",function(u){if(!(o||u===null)){if(t.size&&n+u.length>t.size){o=!0,i(new FetchError(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}n+=u.length,r.push(u)}}),e.on("end",function(){if(!o){clearTimeout(c);try{a(Buffer.concat(r,n))}catch(u){i(new FetchError(`Could not create Buffer from response body for ${t.url}: ${u.message}`,"system",u))}}})})}function convertBody(t,e){if(typeof convert!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=e.get("content-type");let n="utf-8",o,a;return r&&(o=/charset=([^;]*)/i.exec(r)),a=t.slice(0,1024).toString(),!o&&a&&(o=/<meta.+?charset=(['"])(.+?)\1/i.exec(a)),!o&&a&&(o=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(a),o||(o=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(a),o&&o.pop()),o&&(o=/charset=(.*)/i.exec(o.pop()))),!o&&a&&(o=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(a)),o&&(n=o.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),convert(t,"UTF-8",n).toString()}function isURLSearchParams(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function isBlob$1(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function clone$1(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof streamBrowserify&&typeof n.getBoundary!="function"&&(e=new PassThrough,r=new PassThrough,n.pipe(e),n.pipe(r),t[INTERNALS].body=e,n=r),n}function extractContentType(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":isURLSearchParams(t)?"application/x-www-form-urlencoded;charset=UTF-8":isBlob$1(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof streamBrowserify?null:"text/plain;charset=UTF-8"}function getTotalBytes(t){const e=t.body;return e===null?0:isBlob$1(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function writeToStream(t,e){const r=e.body;r===null?t.end():isBlob$1(r)?r.stream().pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)}Body.Promise=global.Promise;const invalidTokenRegex=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,invalidHeaderCharRegex=/[^\t\x20-\x7e\x80-\xff]/;function validateName(t){if(t=`${t}`,invalidTokenRegex.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function validateValue(t){if(t=`${t}`,invalidHeaderCharRegex.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function find(t,e){e=e.toLowerCase();for(const r in t)if(r.toLowerCase()===e)return r}const MAP=Symbol("map");class Headers$2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[MAP]=Object.create(null),e instanceof Headers$2){const r=e.raw(),n=Object.keys(r);for(const o of n)for(const a of r[o])this.append(o,a);return}if(e!=null)if(typeof e=="object"){const r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");const n=[];for(const o of e){if(typeof o!="object"||typeof o[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(o))}for(const o of n){if(o.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(o[0],o[1])}}else for(const n of Object.keys(e)){const o=e[n];this.append(n,o)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,validateName(e);const r=find(this[MAP],e);return r===void 0?null:this[MAP][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=getHeaders(this),o=0;for(;o<n.length;){var a=n[o];const i=a[0],c=a[1];e.call(r,c,i,this),n=getHeaders(this),o++}}set(e,r){e=`${e}`,r=`${r}`,validateName(e),validateValue(r);const n=find(this[MAP],e);this[MAP][n!==void 0?n:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,validateName(e),validateValue(r);const n=find(this[MAP],e);n!==void 0?this[MAP][n].push(r):this[MAP][e]=[r]}has(e){return e=`${e}`,validateName(e),find(this[MAP],e)!==void 0}delete(e){e=`${e}`,validateName(e);const r=find(this[MAP],e);r!==void 0&&delete this[MAP][r]}raw(){return this[MAP]}keys(){return createHeadersIterator(this,"key")}values(){return createHeadersIterator(this,"value")}[Symbol.iterator](){return createHeadersIterator(this,"key+value")}}Headers$2.prototype.entries=Headers$2.prototype[Symbol.iterator];Object.defineProperty(Headers$2.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(Headers$2.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function getHeaders(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[MAP]).sort().map(e==="key"?function(n){return n.toLowerCase()}:e==="value"?function(n){return t[MAP][n].join(", ")}:function(n){return[n.toLowerCase(),t[MAP][n].join(", ")]})}const INTERNAL=Symbol("internal");function createHeadersIterator(t,e){const r=Object.create(HeadersIteratorPrototype);return r[INTERNAL]={target:t,kind:e,index:0},r}const HeadersIteratorPrototype=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==HeadersIteratorPrototype)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[INTERNAL];const e=t.target,r=t.kind,n=t.index,o=getHeaders(e,r),a=o.length;return n>=a?{value:void 0,done:!0}:(this[INTERNAL].index=n+1,{value:o[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(HeadersIteratorPrototype,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function exportNodeCompatibleHeaders(t){const e=Object.assign({__proto__:null},t[MAP]),r=find(t[MAP],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function createHeadersLenient(t){const e=new Headers$2;for(const r of Object.keys(t))if(!invalidTokenRegex.test(r))if(Array.isArray(t[r]))for(const n of t[r])invalidHeaderCharRegex.test(n)||(e[MAP][r]===void 0?e[MAP][r]=[n]:e[MAP][r].push(n));else invalidHeaderCharRegex.test(t[r])||(e[MAP][r]=[t[r]]);return e}const INTERNALS$1=Symbol("Response internals"),STATUS_CODES=http$1.STATUS_CODES;class Response$2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Body.call(this,e,r);const n=r.status||200,o=new Headers$2(r.headers);if(e!=null&&!o.has("Content-Type")){const a=extractContentType(e);a&&o.append("Content-Type",a)}this[INTERNALS$1]={url:r.url,status:n,statusText:r.statusText||STATUS_CODES[n],headers:o,counter:r.counter}}get url(){return this[INTERNALS$1].url||""}get status(){return this[INTERNALS$1].status}get ok(){return this[INTERNALS$1].status>=200&&this[INTERNALS$1].status<300}get redirected(){return this[INTERNALS$1].counter>0}get statusText(){return this[INTERNALS$1].statusText}get headers(){return this[INTERNALS$1].headers}clone(){return new Response$2(clone$1(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}Body.mixIn(Response$2.prototype);Object.defineProperties(Response$2.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Object.defineProperty(Response$2.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const INTERNALS$2=Symbol("Request internals"),parse_url=globSourceImport.parse,format_url=globSourceImport.format,streamDestructionSupported="destroy"in streamBrowserify.Readable.prototype;function isRequest(t){return typeof t=="object"&&typeof t[INTERNALS$2]=="object"}function isAbortSignal(t){const e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}class Request$2{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;isRequest(e)?n=parse_url(e.url):(e&&e.href?n=parse_url(e.href):n=parse_url(`${e}`),e={});let o=r.method||e.method||"GET";if(o=o.toUpperCase(),(r.body!=null||isRequest(e)&&e.body!==null)&&(o==="GET"||o==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body!=null?r.body:isRequest(e)&&e.body!==null?clone$1(e):null;Body.call(this,a,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const i=new Headers$2(r.headers||e.headers||{});if(a!=null&&!i.has("Content-Type")){const u=extractContentType(a);u&&i.append("Content-Type",u)}let c=isRequest(e)?e.signal:null;if("signal"in r&&(c=r.signal),c!=null&&!isAbortSignal(c))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[INTERNALS$2]={method:o,redirect:r.redirect||e.redirect||"follow",headers:i,parsedURL:n,signal:c},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[INTERNALS$2].method}get url(){return format_url(this[INTERNALS$2].parsedURL)}get headers(){return this[INTERNALS$2].headers}get redirect(){return this[INTERNALS$2].redirect}get signal(){return this[INTERNALS$2].signal}clone(){return new Request$2(this)}}Body.mixIn(Request$2.prototype);Object.defineProperty(Request$2.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(Request$2.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function getNodeRequestOptions(t){const e=t[INTERNALS$2].parsedURL,r=new Headers$2(t[INTERNALS$2].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof streamBrowserify.Readable&&!streamDestructionSupported)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),t.body!=null){const a=getTotalBytes(t);typeof a=="number"&&(n=String(a))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let o=t.agent;return typeof o=="function"&&(o=o(e)),!r.has("Connection")&&!o&&r.set("Connection","close"),Object.assign({},e,{method:t.method,headers:exportNodeCompatibleHeaders(r),agent:o})}function AbortError$1(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}AbortError$1.prototype=Object.create(Error.prototype);AbortError$1.prototype.constructor=AbortError$1;AbortError$1.prototype.name="AbortError";const PassThrough$1=streamBrowserify.PassThrough,resolve_url=globSourceImport.resolve;function fetch$2(t,e){if(!fetch$2.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return Body.Promise=fetch$2.Promise,new fetch$2.Promise(function(r,n){const o=new Request$2(t,e),a=getNodeRequestOptions(o),i=(a.protocol==="https:",http$1).request,c=o.signal;let u=null;const l=function(){let E=new AbortError$1("The user aborted a request.");n(E),o.body&&o.body instanceof streamBrowserify.Readable&&destroyStream(o.body,E),!(!u||!u.body)&&u.body.emit("error",E)};if(c&&c.aborted){l();return}const f=function(){l(),B()},g=i(a);let S;c&&c.addEventListener("abort",f);function B(){g.abort(),c&&c.removeEventListener("abort",f),clearTimeout(S)}o.timeout&&g.once("socket",function($){S=setTimeout(function(){n(new FetchError(`network timeout at: ${o.url}`,"request-timeout")),B()},o.timeout)}),g.on("error",function($){n(new FetchError(`request to ${o.url} failed, reason: ${$.message}`,"system",$)),u&&u.body&&destroyStream(u.body,$),B()}),fixResponseChunkedTransferBadEnding(g,function($){c&&c.aborted||destroyStream(u.body,$)}),parseInt(process.version.substring(1))<14&&g.on("socket",function($){$.addListener("close",function(E){const P=$.listenerCount("data")>0;if(u&&P&&!E&&!(c&&c.aborted)){const A=new Error("Premature close");A.code="ERR_STREAM_PREMATURE_CLOSE",u.body.emit("error",A)}})}),g.on("response",function($){clearTimeout(S);const E=createHeadersLenient($.headers);if(fetch$2.isRedirect($.statusCode)){const C=E.get("Location"),v=C===null?null:resolve_url(o.url,C);switch(o.redirect){case"error":n(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${o.url}`,"no-redirect")),B();return;case"manual":if(v!==null)try{E.set("Location",v)}catch(I){n(I)}break;case"follow":if(v===null)break;if(o.counter>=o.follow){n(new FetchError(`maximum redirect reached at: ${o.url}`,"max-redirect")),B();return}const x={headers:new Headers$2(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:o.body,signal:o.signal,timeout:o.timeout,size:o.size};if($.statusCode!==303&&o.body&&getTotalBytes(o)===null){n(new FetchError("Cannot follow redirect with body being a readable stream","unsupported-redirect")),B();return}($.statusCode===303||($.statusCode===301||$.statusCode===302)&&o.method==="POST")&&(x.method="GET",x.body=void 0,x.headers.delete("content-length")),r(fetch$2(new Request$2(v,x))),B();return}}$.once("end",function(){c&&c.removeEventListener("abort",f)});let P=$.pipe(new PassThrough$1);const A={url:o.url,status:$.statusCode,statusText:$.statusMessage,headers:E,size:o.size,timeout:o.timeout,counter:o.counter},_=E.get("Content-Encoding");if(!o.compress||o.method==="HEAD"||_===null||$.statusCode===204||$.statusCode===304){u=new Response$2(P,A),r(u);return}const R={flush:globSourceImport.Z_SYNC_FLUSH,finishFlush:globSourceImport.Z_SYNC_FLUSH};if(_=="gzip"||_=="x-gzip"){P=P.pipe(globSourceImport.createGunzip(R)),u=new Response$2(P,A),r(u);return}if(_=="deflate"||_=="x-deflate"){$.pipe(new PassThrough$1).once("data",function(v){(v[0]&15)==8?P=P.pipe(globSourceImport.createInflate()):P=P.pipe(globSourceImport.createInflateRaw()),u=new Response$2(P,A),r(u)});return}if(_=="br"&&typeof globSourceImport.createBrotliDecompress=="function"){P=P.pipe(globSourceImport.createBrotliDecompress()),u=new Response$2(P,A),r(u);return}u=new Response$2(P,A),r(u)}),writeToStream(g,o)})}function fixResponseChunkedTransferBadEnding(t,e){let r;t.on("socket",function(n){r=n}),t.on("response",function(n){const o=n.headers;o["transfer-encoding"]==="chunked"&&!o["content-length"]&&n.once("close",function(a){if(r.listenerCount("data")>0&&!a){const c=new Error("Premature close");c.code="ERR_STREAM_PREMATURE_CLOSE",e(c)}})})}function destroyStream(t,e){t.destroy?t.destroy(e):(t.emit("error",e),t.end())}fetch$2.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308};fetch$2.Promise=global.Promise;var lib=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fetch$2,Headers:Headers$2,Request:Request$2,Response:Response$2,FetchError}),require$$0=getAugmentedNamespace(lib);globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?src$1.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:src$1.exports={default:require$$0.default,Headers:require$$0.Headers,Request:require$$0.Request,Response:require$$0.Response};const{isElectronMain}=env;isElectronMain?fetch$3.exports=window["electron-fetch"]:fetch$3.exports=src$1.exports;const{TimeoutError:TimeoutError$1,AbortError}=error,{Response:Response$1,Request:Request$1,Headers:Headers$1,default:fetch$1}=fetch$3.exports,fetchWithProgress=(t,e={})=>{const r=new XMLHttpRequest;r.open(e.method||"GET",t.toString(),!0);const{timeout:n,headers:o}=e;if(n&&n>0&&n<1/0&&(r.timeout=n),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),o)for(const[a,i]of new Headers$1(o))r.setRequestHeader(a,i);return e.signal&&(e.signal.onabort=()=>r.abort()),e.onUploadProgress&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((a,i)=>{const c=u=>{switch(u.type){case"error":{a(Response$1.error());break}case"load":{a(new ResponseWithURL(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:parseHeaders(r.getAllResponseHeaders())}));break}case"timeout":{i(new TimeoutError$1);break}case"abort":{i(new AbortError);break}}};r.onerror=c,r.onload=c,r.ontimeout=c,r.onabort=c,r.send(e.body)})},fetchWithStreaming=fetch$1,fetchWith=(t,e={})=>e.onUploadProgress!=null?fetchWithProgress(t,e):fetchWithStreaming(t,e),parseHeaders=t=>{const e=new Headers$1;for(const r of t.trim().split(/[\r\n]+/)){const n=r.indexOf(": ");n>0&&e.set(r.slice(0,n),r.slice(n+1))}return e};class ResponseWithURL extends Response$1{constructor(e,r,n){super(r,n);Object.defineProperty(this,"url",{value:e})}}var fetch_browser={fetch:fetchWith,Request:Request$1,Headers:Headers$1},isPlainObj=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=t=>{const e=[];for(const r in t)hasOwnProperty.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const n of r)propertyIsEnumerable.call(t,n)&&e.push(n)}return e};function clone(t){return Array.isArray(t)?cloneArray(t):isOptionObject(t)?cloneOptionObject(t):t}function cloneArray(t){const e=t.slice(0,0);return getEnumerableOwnPropertyKeys(t).forEach(r=>{defineProperty(e,r,clone(t[r]))}),e}function cloneOptionObject(t){const e=Object.getPrototypeOf(t)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(t).forEach(r=>{defineProperty(e,r,clone(t[r]))}),e}const mergeKeys=(t,e,r,n)=>(r.forEach(o=>{typeof e[o]=="undefined"&&n.ignoreUndefined||(o in t&&t[o]!==Object.getPrototypeOf(t)?defineProperty(t,o,merge$2(t[o],e[o],n)):defineProperty(t,o,clone(e[o])))}),t),concatArrays=(t,e,r)=>{let n=t.slice(0,0),o=0;return[t,e].forEach(a=>{const i=[];for(let c=0;c<a.length;c++)!hasOwnProperty.call(a,c)||(i.push(String(c)),a===t?defineProperty(n,o++,a[c]):defineProperty(n,o++,clone(a[c])));n=mergeKeys(n,a,getEnumerableOwnPropertyKeys(a).filter(c=>!i.includes(c)),r)}),n};function merge$2(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?concatArrays(t,e,r):!isOptionObject(e)||!isOptionObject(t)?clone(e):mergeKeys(t,e,getEnumerableOwnPropertyKeys(e),r)}var mergeOptions=function(...t){const e=merge$2(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let r={_:{}};for(const n of t)if(n!==void 0){if(!isOptionObject(n))throw new TypeError("`"+n+"` is not an Option Object");r=merge$2(r,{_:n},e)}return r._};const isReactNative=typeof navigator!="undefined"&&navigator.product==="ReactNative";function getDefaultBase(){return isReactNative?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const URL$2=self.URL,defaultBase$1=getDefaultBase();class URLWithLegacySupport$2{constructor(e="",r=defaultBase$1){this.super=new URL$2(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return URL$2.createObjectURL(e)}static revokeObjectURL(e){URL$2.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function format$2(t){if(typeof t=="string")return new URL$2(t).toString();if(!(t instanceof URL$2)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",o=t.protocol?t.protocol+"//":"",a=t.host||"",i=t.hostname||"",c=t.search||(t.query?"?"+t.query:""),u=t.hash||"",l=t.pathname||"",f=t.path||l+c;return`${o}${e||r}${a||i+n}${f}${u}`}}var urlBrowser={URLWithLegacySupport:URLWithLegacySupport$2,URLSearchParams:self.URLSearchParams,defaultBase:defaultBase$1,format:format$2};const{URLWithLegacySupport:URLWithLegacySupport$1,format:format$1}=urlBrowser;var relative$1=(t,e={},r={},n)=>{let o=e.protocol?e.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";let a;try{a=new URLWithLegacySupport$1(t)}catch{a={}}const i=Object.assign({},e,{protocol:o||a.protocol,host:e.host||a.host});return new URLWithLegacySupport$1(t,format$1(i)).toString()};const{URLWithLegacySupport,format,URLSearchParams:URLSearchParams$2,defaultBase}=urlBrowser,relative=relative$1;var isoUrl={URL:URLWithLegacySupport,URLSearchParams:URLSearchParams$2,format,relative,defaultBase},src={},browser={exports:{}};const{AbortController:AbortController$3,AbortSignal}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;browser.exports=AbortController$3;browser.exports.AbortSignal=AbortSignal;browser.exports.default=AbortController$3;let impl;globalThis.AbortController&&globalThis.AbortSignal?impl=globalThis:impl=browser.exports;src.AbortSignal=impl.AbortSignal;var AbortController$2=src.AbortController=impl.AbortController,anySignal$2={exports:{}};const{AbortController:AbortController$1}=src;function anySignal$1(t){const e=new AbortController$1;function r(){e.abort();for(const n of t)!n||!n.removeEventListener||n.removeEventListener("abort",r)}for(const n of t)if(!(!n||!n.addEventListener)){if(n.aborted){r();break}n.addEventListener("abort",r)}return e.signal}anySignal$2.exports=anySignal$1;var anySignal_2=anySignal$2.exports.anySignal=anySignal$1;const{fetch,Request,Headers}=fetch_browser,{TimeoutError,HTTPError}=error,merge$1=mergeOptions.bind({ignoreUndefined:!0}),{URL:URL$1,URLSearchParams:URLSearchParams$1}=isoUrl,{AbortController}=src,anySignal=anySignal$2.exports,timeout=(t,e,r)=>{if(e===void 0)return t;const n=Date.now(),o=()=>Date.now()-n>=e;return new Promise((a,i)=>{const c=setTimeout(()=>{o()&&(i(new TimeoutError),r.abort())},e),u=l=>g=>{if(clearTimeout(c),o()){i(new TimeoutError);return}l(g)};t.then(u(a),u(i))})},defaults={throwHttpErrors:!0,credentials:"same-origin"};class HTTP{constructor(e={}){this.opts=merge$1(defaults,e)}async fetch(e,r={}){const n=merge$1(this.opts,r),o=new Headers(n.headers);if(typeof e!="string"&&!(e instanceof URL$1||e instanceof Request))throw new TypeError("`resource` must be a string, URL, or Request");const a=new URL$1(e.toString(),n.base),{searchParams:i,transformSearchParams:c,json:u}=n;i&&(typeof c=="function"?a.search=c(new URLSearchParams$1(n.searchParams)):a.search=new URLSearchParams$1(n.searchParams)),u&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));const l=new AbortController,f=anySignal([l.signal,n.signal]),g=await timeout(fetch(a.toString(),N(T({},n),{signal:f,timeout:void 0,headers:o})),n.timeout,l);if(!g.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(g),new HTTPError(g);return g.iterator=function(){return fromStream(g.body)},g.ndjson=async function*(){for await(const S of ndjson(g.iterator()))r.transform?yield r.transform(S):yield S},g}post(e,r={}){return this.fetch(e,N(T({},r),{method:"POST"}))}get(e,r={}){return this.fetch(e,N(T({},r),{method:"GET"}))}put(e,r={}){return this.fetch(e,N(T({},r),{method:"PUT"}))}delete(e,r={}){return this.fetch(e,N(T({},r),{method:"DELETE"}))}options(e,r={}){return this.fetch(e,N(T({},r),{method:"OPTIONS"}))}}const ndjson=async function*(t){const e=new TextDecoder;let r="";for await(const n of t){r+=e.decode(n,{stream:!0});const o=r.split(/\r?\n/);for(let a=0;a<o.length-1;a++){const i=o[a].trim();i.length>0&&(yield JSON.parse(i))}r=o[o.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},fromStream=t=>{if(isNodeReadableStream(t)){const e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(isWebReadableStream(t)){const e=t.getReader();return async function*(){try{for(;;){const{done:r,value:n}=await e.read();if(r)return;n&&(yield n)}}finally{e.releaseLock()}}()}if(isAsyncIterable(t))return t;throw new TypeError("Body can't be converted to AsyncIterable")},isAsyncIterable=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",isWebReadableStream=t=>t&&typeof t.getReader=="function",isNodeReadableStream=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");HTTP.HTTPError=HTTPError;HTTP.TimeoutError=TimeoutError;HTTP.streamToAsyncIterator=fromStream;HTTP.post=(t,e)=>new HTTP(e).post(t,e);HTTP.get=(t,e)=>new HTTP(e).get(t,e);HTTP.put=(t,e)=>new HTTP(e).put(t,e);HTTP.delete=(t,e)=>new HTTP(e).delete(t,e);HTTP.options=(t,e)=>new HTTP(e).options(t,e);var http=HTTP;const{Multiaddr}=src$2,reduceValue=(t,e)=>e,tcpUri=(t,e,r,n)=>{if(n&&n.assumeHttp===!1)return`tcp://${t}:${e}`;let o="tcp",a=`:${e}`;return r[r.length-1].protocol==="tcp"&&(o=e==="443"?"https":"http",a=e==="443"||e==="80"?"":a),`${o}://${t}${a}`},Reducers={ip4:reduceValue,ip6:(t,e,r,n)=>n.length===1&&n[0].protocol==="ip6"?e:`[${e}]`,tcp:(t,e,r,n,o)=>n.some(a=>["http","https","ws","wss"].includes(a.protocol))?`${t}:${e}`:tcpUri(t,e,n,o),udp:(t,e)=>`udp://${t}:${e}`,dnsaddr:reduceValue,dns4:reduceValue,dns6:reduceValue,ipfs:(t,e)=>`${t}/ipfs/${e}`,p2p:(t,e)=>`${t}/p2p/${e}`,http:t=>`http://${t}`,https:t=>`https://${t}`,ws:t=>`ws://${t}`,wss:t=>`wss://${t}`,"p2p-websocket-star":t=>`${t}/p2p-websocket-star`,"p2p-webrtc-star":t=>`${t}/p2p-webrtc-star`,"p2p-webrtc-direct":t=>`${t}/p2p-webrtc-direct`};var multiaddrToUri=(t,e)=>{const r=new Multiaddr(t),n=t.toString().split("/").slice(1);return r.tuples().map(o=>({protocol:n.shift(),content:o[1]?n.shift():null})).reduce((o,a,i,c)=>{const u=Reducers[a.protocol];if(!u)throw new Error(`Unsupported protocol ${a.protocol}`);return u(o,a.content,i,c,e)},"")};function toUrlString(t){try{t=multiaddrToUri(new src$2.Multiaddr(t))}catch{}return t=t.toString(),t}var getAgent=()=>{};const log$1=debug("ipfs-http-client:lib:error-handler"),merge=mergeOptions.bind({ignoreUndefined:!0}),DEFAULT_PROTOCOL=env.isBrowser||env.isWebWorker?location.protocol:"http",DEFAULT_HOST=env.isBrowser||env.isWebWorker?location.hostname:"localhost",DEFAULT_PORT=env.isBrowser||env.isWebWorker?location.port:"5001",normalizeOptions=(t={})=>{let e,r={},n;if(typeof t=="string"||src$2.Multiaddr.isMultiaddr(t))e=new URL(toUrlString(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||src$2.Multiaddr.isMultiaddr(t.url))e=new URL(toUrlString(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t||{};const o=(r.protocol||DEFAULT_PROTOCOL).replace(":",""),a=(r.host||DEFAULT_HOST).split(":")[0],i=r.port||DEFAULT_PORT;e=new URL(`${o}://${a}:${i}`)}if(r.apiPath?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),env.isNode){const o=getAgent();n=r.agent||new o({keepAlive:!0,maxSockets:6})}return N(T({},r),{host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:n})},errorHandler=async t=>{let e;try{if((t.headers.get("Content-Type")||"").startsWith("application/json")){const n=await t.json();log$1(n),e=n.Message||n.message}else e=await t.text()}catch(n){log$1("Failed to parse error response",n),e=n.message}let r=new http.HTTPError(t);throw e&&(e.includes("deadline has elapsed")&&(r=new http.TimeoutError),e&&e.includes("context deadline exceeded")&&(r=new http.TimeoutError)),e&&e.includes("request timed out")&&(r=new http.TimeoutError),e&&(r.message=e),r},KEBAB_REGEX=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,kebabCase=t=>t.replace(KEBAB_REGEX,function(e){return"-"+e.toLowerCase()}),parseTimeout=t=>typeof t=="string"?parse$1(t):t;class Client extends http{constructor(e={}){const r=normalizeOptions(e);super({timeout:parseTimeout(r.timeout||0)||void 0,headers:r.headers,base:`${r.url}`,handleError:errorHandler,transformSearchParams:o=>{const a=new URLSearchParams;for(const[i,c]of o)c!=="undefined"&&c!=="null"&&i!=="signal"&&a.append(kebabCase(i),c),i==="timeout"&&!isNaN(c)&&a.append(kebabCase(i),c);return a},agent:r.agent});delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=(o,a={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${r.url}/${o}`),n.call(this,o,merge(a,{method:"POST"})))}}const configure=t=>e=>t(new Client(e),e);function modeToString$1(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}function parseMtime$1(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){const r=t.getTime(),n=Math.floor(r/1e3);e={secs:n,nsecs:(r-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw errCode$1(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}function toUrlSearchParams(i={}){var c=i,{arg:t,searchParams:e,hashAlg:r,mtime:n,mode:o}=c,a=O(c,["arg","searchParams","hashAlg","mtime","mode"]);e&&(a=T(T({},a),e)),r&&(a.hash=r),n!=null&&(n=parseMtime$1(n),a.mtime=n.secs,a.mtimeNsecs=n.nsecs),o!=null&&(a.mode=modeToString$1(o)),a.timeout&&!isNaN(a.timeout)&&(a.timeout=`${a.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);const u=new URLSearchParams(a);return t.forEach(l=>u.append("arg",l)),u}const createWantlist=configure(t=>{async function e(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Keys||[]).map(o=>CID$4.parse(o["/"]))}return e}),createWantlistForPeer=configure(t=>{async function e(r,n={}){return((await(await t.post("bitswap/wantlist",{signal:n.signal,searchParams:toUrlSearchParams(N(T({},n),{peer:r.toString()})),headers:n.headers})).json()).Keys||[]).map(a=>CID$4.parse(a["/"]))}return e}),createStat$4=configure(t=>{async function e(r={}){const n=await t.post("bitswap/stat",{searchParams:toUrlSearchParams(r),signal:r.signal,headers:r.headers});return toCoreInterface$4(await n.json())}return e});function toCoreInterface$4(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist||[]).map(e=>CID$4.parse(e["/"])),peers:t.Peers||[],blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}const createUnwant=configure(t=>{async function e(r,n={}){return(await t.post("bitswap/unwant",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r.toString()},n)),headers:n.headers})).json()}return e});function createBitswap(t){return{wantlist:createWantlist(t),wantlistForPeer:createWantlistForPeer(t),unwant:createUnwant(t),stat:createStat$4(t)}}const createGet$5=configure(t=>{async function e(r,n={}){const o=await t.post("block/get",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r.toString()},n)),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}return e});function peekableIterator(t){const[e,r]=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:o=>{n.push(o)},next:()=>n.length?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}var itPeekable=peekableIterator;async function*browserReadableStreamToIt$1(t,e={}){const r=t.getReader();try{for(;;){const n=await r.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&r.cancel(),r.releaseLock()}}var browserReadablestreamToIt=browserReadableStreamToIt$1;const all=async t=>{const e=[];for await(const r of t)e.push(r);return e};var itAll=all;function isBytes(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function isBlob(t){return t.constructor&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function isFileObject(t){return typeof t=="object"&&(t.path||t.content)}const isReadableStream=t=>t&&typeof t.getReader=="function";async function normaliseContent$1(t){if(isBytes(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(isBlob(t))return t;if(isReadableStream(t)&&(t=browserReadablestreamToIt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=itPeekable(t),{value:r,done:n}=await e.peek();if(n)return itToBlob(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await itAll(e))]);if(isBytes(r)||typeof r=="string"||r instanceof String)return itToBlob(e)}throw errCode$1(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}async function itToBlob(t){const e=[];for await(const r of t)e.push(r);return new Blob(e)}const map=async function*(t,e){for await(const r of t)yield e(r)};var itMap=map,indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(t,e){for(var r=new Array(arguments.length-1),n=0,o=2,a=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(c,u){r[n]=function(f){if(a)if(a=!1,f)u(f);else{for(var g=new Array(arguments.length-1),S=0;S<g.length;)g[S++]=arguments[S];c.apply(null,g)}};try{t.apply(e||null,r)}catch(l){a&&(a=!1,u(l))}})}var base64$1={};(function(t){var e=t;e.length=function(c){var u=c.length;if(!u)return 0;for(var l=0;--u%4>1&&c.charAt(u)==="=";)++l;return Math.ceil(c.length*3)/4-l};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(c,u,l){for(var f=null,g=[],S=0,B=0,$;u<l;){var E=c[u++];switch(B){case 0:g[S++]=r[E>>2],$=(E&3)<<4,B=1;break;case 1:g[S++]=r[$|E>>4],$=(E&15)<<2,B=2;break;case 2:g[S++]=r[$|E>>6],g[S++]=r[E&63],B=0;break}S>8191&&((f||(f=[])).push(String.fromCharCode.apply(String,g)),S=0)}return B&&(g[S++]=r[$],g[S++]=61,B===1&&(g[S++]=61)),f?(S&&f.push(String.fromCharCode.apply(String,g.slice(0,S))),f.join("")):String.fromCharCode.apply(String,g.slice(0,S))};var a="invalid encoding";e.decode=function(c,u,l){for(var f=l,g=0,S,B=0;B<c.length;){var $=c.charCodeAt(B++);if($===61&&g>1)break;if(($=n[$])===void 0)throw Error(a);switch(g){case 0:S=$,g=1;break;case 1:u[l++]=S<<2|($&48)>>4,S=$,g=2;break;case 2:u[l++]=(S&15)<<4|($&60)>>2,S=$,g=3;break;case 3:u[l++]=(S&3)<<6|$,g=0;break}}if(g===1)throw Error(a);return l-f},e.test=function(c){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(c)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};EventEmitter.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===r?n.splice(o,1):++o;return this};EventEmitter.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<r.length;)r[o].fn.apply(r[o++].ctx,n)}return this};var float=factory(factory);function factory(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function o(u,l,f){e[0]=u,l[f]=r[0],l[f+1]=r[1],l[f+2]=r[2],l[f+3]=r[3]}function a(u,l,f){e[0]=u,l[f]=r[3],l[f+1]=r[2],l[f+2]=r[1],l[f+3]=r[0]}t.writeFloatLE=n?o:a,t.writeFloatBE=n?a:o;function i(u,l){return r[0]=u[l],r[1]=u[l+1],r[2]=u[l+2],r[3]=u[l+3],e[0]}function c(u,l){return r[3]=u[l],r[2]=u[l+1],r[1]=u[l+2],r[0]=u[l+3],e[0]}t.readFloatLE=n?i:c,t.readFloatBE=n?c:i}():function(){function e(n,o,a,i){var c=o<0?1:0;if(c&&(o=-o),o===0)n(1/o>0?0:2147483648,a,i);else if(isNaN(o))n(2143289344,a,i);else if(o>34028234663852886e22)n((c<<31|2139095040)>>>0,a,i);else if(o<11754943508222875e-54)n((c<<31|Math.round(o/1401298464324817e-60))>>>0,a,i);else{var u=Math.floor(Math.log(o)/Math.LN2),l=Math.round(o*Math.pow(2,-u)*8388608)&8388607;n((c<<31|u+127<<23|l)>>>0,a,i)}}t.writeFloatLE=e.bind(null,writeUintLE),t.writeFloatBE=e.bind(null,writeUintBE);function r(n,o,a){var i=n(o,a),c=(i>>31)*2+1,u=i>>>23&255,l=i&8388607;return u===255?l?NaN:c*(1/0):u===0?c*1401298464324817e-60*l:c*Math.pow(2,u-150)*(l+8388608)}t.readFloatLE=r.bind(null,readUintLE),t.readFloatBE=r.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function o(u,l,f){e[0]=u,l[f]=r[0],l[f+1]=r[1],l[f+2]=r[2],l[f+3]=r[3],l[f+4]=r[4],l[f+5]=r[5],l[f+6]=r[6],l[f+7]=r[7]}function a(u,l,f){e[0]=u,l[f]=r[7],l[f+1]=r[6],l[f+2]=r[5],l[f+3]=r[4],l[f+4]=r[3],l[f+5]=r[2],l[f+6]=r[1],l[f+7]=r[0]}t.writeDoubleLE=n?o:a,t.writeDoubleBE=n?a:o;function i(u,l){return r[0]=u[l],r[1]=u[l+1],r[2]=u[l+2],r[3]=u[l+3],r[4]=u[l+4],r[5]=u[l+5],r[6]=u[l+6],r[7]=u[l+7],e[0]}function c(u,l){return r[7]=u[l],r[6]=u[l+1],r[5]=u[l+2],r[4]=u[l+3],r[3]=u[l+4],r[2]=u[l+5],r[1]=u[l+6],r[0]=u[l+7],e[0]}t.readDoubleLE=n?i:c,t.readDoubleBE=n?c:i}():function(){function e(n,o,a,i,c,u){var l=i<0?1:0;if(l&&(i=-i),i===0)n(0,c,u+o),n(1/i>0?0:2147483648,c,u+a);else if(isNaN(i))n(0,c,u+o),n(2146959360,c,u+a);else if(i>17976931348623157e292)n(0,c,u+o),n((l<<31|2146435072)>>>0,c,u+a);else{var f;if(i<22250738585072014e-324)f=i/5e-324,n(f>>>0,c,u+o),n((l<<31|f/4294967296)>>>0,c,u+a);else{var g=Math.floor(Math.log(i)/Math.LN2);g===1024&&(g=1023),f=i*Math.pow(2,-g),n(f*4503599627370496>>>0,c,u+o),n((l<<31|g+1023<<20|f*1048576&1048575)>>>0,c,u+a)}}}t.writeDoubleLE=e.bind(null,writeUintLE,0,4),t.writeDoubleBE=e.bind(null,writeUintBE,4,0);function r(n,o,a,i,c){var u=n(i,c+o),l=n(i,c+a),f=(l>>31)*2+1,g=l>>>20&2047,S=4294967296*(l&1048575)+u;return g===2047?S?NaN:f*(1/0):g===0?f*5e-324*S:f*Math.pow(2,g-1075)*(S+4503599627370496)}t.readDoubleLE=r.bind(null,readUintLE,0,4),t.readDoubleBE=r.bind(null,readUintBE,4,0)}(),t}function writeUintLE(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function writeUintBE(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function readUintLE(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}var utf8$2={};(function(t){var e=t;e.length=function(n){for(var o=0,a=0,i=0;i<n.length;++i)a=n.charCodeAt(i),a<128?o+=1:a<2048?o+=2:(a&64512)==55296&&(n.charCodeAt(i+1)&64512)==56320?(++i,o+=4):o+=3;return o},e.read=function(n,o,a){var i=a-o;if(i<1)return"";for(var c=null,u=[],l=0,f;o<a;)f=n[o++],f<128?u[l++]=f:f>191&&f<224?u[l++]=(f&31)<<6|n[o++]&63:f>239&&f<365?(f=((f&7)<<18|(n[o++]&63)<<12|(n[o++]&63)<<6|n[o++]&63)-65536,u[l++]=55296+(f>>10),u[l++]=56320+(f&1023)):u[l++]=(f&15)<<12|(n[o++]&63)<<6|n[o++]&63,l>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,u)),l=0);return c?(l&&c.push(String.fromCharCode.apply(String,u.slice(0,l))),c.join("")):String.fromCharCode.apply(String,u.slice(0,l))},e.write=function(n,o,a){for(var i=a,c,u,l=0;l<n.length;++l)c=n.charCodeAt(l),c<128?o[a++]=c:c<2048?(o[a++]=c>>6|192,o[a++]=c&63|128):(c&64512)==55296&&((u=n.charCodeAt(l+1))&64512)==56320?(c=65536+((c&1023)<<10)+(u&1023),++l,o[a++]=c>>18|240,o[a++]=c>>12&63|128,o[a++]=c>>6&63|128,o[a++]=c&63|128):(o[a++]=c>>12|224,o[a++]=c>>6&63|128,o[a++]=c&63|128);return a-i}})(utf8$2);var pool_1=pool;function pool(t,e,r){var n=r||8192,o=n>>>1,a=null,i=n;return function(u){if(u<1||u>o)return t(u);i+u>n&&(a=t(n),i=0);var l=e.call(a,i,i+=u);return i&7&&(i=(i|7)+1),l}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(t,e){this.lo=t>>>0,this.hi=e>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function t(e){if(e===0)return zero;var r=e<0;r&&(e=-e);var n=e>>>0,o=(e-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new LongBits$2(n,o)};LongBits$2.from=function t(e){if(typeof e=="number")return LongBits$2.fromNumber(e);if(util$5.isString(e))if(util$5.Long)e=util$5.Long.fromString(e);else return LongBits$2.fromNumber(parseInt(e,10));return e.low||e.high?new LongBits$2(e.low>>>0,e.high>>>0):zero};LongBits$2.prototype.toNumber=function t(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function t(e){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function t(e){return e===zeroHash?zero:new LongBits$2((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)};LongBits$2.prototype.toHash=function t(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function t(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};LongBits$2.prototype.zzDecode=function t(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};LongBits$2.prototype.length=function t(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10};(function(t){var e=t;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=longbits,e.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},e.isString=function(a){return typeof a=="string"||a instanceof String},e.isObject=function(a){return a&&typeof a=="object"},e.isset=e.isSet=function(a,i){var c=a[i];return c!=null&&a.hasOwnProperty(i)?typeof c!="object"||(Array.isArray(c)?c.length:Object.keys(c).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(a){return typeof a=="number"?e.Buffer?e._Buffer_allocUnsafe(a):new e.Array(a):e.Buffer?e._Buffer_from(a):typeof Uint8Array=="undefined"?a:new Uint8Array(a)},e.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(a){return a?e.LongBits.from(a).toHash():e.LongBits.zeroHash},e.longFromHash=function(a,i){var c=e.LongBits.fromHash(a);return e.Long?e.Long.fromBits(c.lo,c.hi,i):c.toNumber(Boolean(i))};function r(o,a,i){for(var c=Object.keys(a),u=0;u<c.length;++u)(o[c[u]]===void 0||!i)&&(o[c[u]]=a[c[u]]);return o}e.merge=r,e.lcFirst=function(a){return a.charAt(0).toLowerCase()+a.substring(1)};function n(o){function a(i,c){if(!(this instanceof a))return new a(i,c);Object.defineProperty(this,"message",{get:function(){return i}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),c&&r(this,c)}return(a.prototype=Object.create(Error.prototype)).constructor=a,Object.defineProperty(a.prototype,"name",{get:function(){return o}}),a.prototype.toString=function(){return this.name+": "+this.message},a}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(a){for(var i={},c=0;c<a.length;++c)i[a[c]]=1;return function(){for(var u=Object.keys(this),l=u.length-1;l>-1;--l)if(i[u[l]]===1&&this[u[l]]!==void 0&&this[u[l]]!==null)return u[l]}},e.oneOfSetter=function(a){return function(i){for(var c=0;c<a.length;++c)a[c]!==i&&delete this[a[c]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(i,c){return new o(i,c)},e._Buffer_allocUnsafe=o.allocUnsafe||function(i){return new o(i)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function noop(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$2=function t(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function t(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function t(e,r,n){return this.tail=this.tail.next=new Op(e,r,n),this.len+=r,this};function writeByte(t,e,r){e[r]=t&255}function writeVarint32(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function t(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function t(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function t(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}Writer$1.prototype.uint64=function t(e){var r=LongBits$1.from(e);return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function t(e){var r=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.bool=function t(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}Writer$1.prototype.fixed32=function t(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function t(e){var r=LongBits$1.from(e);return this._push(writeFixed32,4,r.lo)._push(writeFixed32,4,r.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function t(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function t(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function t(e,r,n){r.set(e,n)}:function t(e,r,n){for(var o=0;o<e.length;++o)r[n+o]=e[o]};Writer$1.prototype.bytes=function t(e){var r=e.length>>>0;if(!r)return this._push(writeByte,1,0);if(util$4.isString(e)){var n=Writer$1.alloc(r=base64.length(e));base64.decode(e,n,0),e=n}return this.uint32(r)._push(writeBytes,r,e)};Writer$1.prototype.string=function t(e){var r=utf8$1.length(e);return r?this.uint32(r)._push(utf8$1.write,r,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function t(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function t(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function t(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};Writer$1.prototype.finish=function t(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};Writer$1._configure=function(t){BufferWriter$1=t,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var o=0;o<e.length;)r[n++]=e[o++]}};BufferWriter.prototype.bytes=function t(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(BufferWriter.writeBytesBuffer,r,e),this};function writeStringBuffer(t,e,r){t.length<40?util$3.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}BufferWriter.prototype.string=function t(e){var r=util$3.Buffer.byteLength(e);return this.uint32(r),r&&this._push(writeStringBuffer,r,e),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader$1(t){this.buf=t,this.pos=0,this.len=t.length}var create_array=typeof Uint8Array!="undefined"?function t(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function t(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$1=function t(){return util$2.Buffer?function(r){return(Reader$1.create=function(o){return util$2.Buffer.isBuffer(o)?new BufferReader$1(o):create_array(o)})(r)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function t(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function t(){return this.uint32()|0};Reader$1.prototype.sint32=function t(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var t=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function t(){return this.uint32()!==0};function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function t(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function t(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Reader$1.prototype.string=function t(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function t(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Reader$1._configure=function(t){BufferReader$1=t,Reader$1.create=create$1(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(t){Reader.call(this,t)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function t(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function t(e,r,n,o,a){if(!o)throw TypeError("request must be specified");var i=this;if(!a)return util.asPromise(t,i,e,r,n,o);if(!i.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return i.rpcImpl(e,r[i.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(u,l){if(u)return i.emit("error",u,e),a(u);if(l===null){i.end(!0);return}if(!(l instanceof n))try{l=n[i.responseDelimited?"decodeDelimited":"decode"](l)}catch(f){return i.emit("error",f,e),a(f)}return i.emit("data",l,e),a(null,l)})}catch(c){i.emit("error",c,e),setTimeout(function(){a(c)},0);return}};Service.prototype.end=function t(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(t){var e=t;e.Service=service})(rpc);var roots={};(function(t){var e=t;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=minimal$1,e.rpc=rpc,e.roots=roots,e.configure=r;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}r()})(indexMinimal);var minimal=indexMinimal;const $Reader=minimal.Reader,$Writer=minimal.Writer,$util=minimal.util,$root=minimal.roots["ipfs-unixfs"]||(minimal.roots["ipfs-unixfs"]={});$root.Data=(()=>{function t(e){if(this.blocksizes=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=$util.newBuffer([]),t.prototype.filesize=$util.Long?$util.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=$util.emptyArray,t.prototype.hashType=$util.Long?$util.Long.fromBits(0,0,!0):0,t.prototype.fanout=$util.Long?$util.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(r,n){if(n||(n=$Writer.create()),n.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&n.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&n.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var o=0;o<r.blocksizes.length;++o)n.uint32(32).uint64(r.blocksizes[o]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&n.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&n.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&n.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&$root.UnixTime.encode(r.mtime,n.uint32(66).fork()).ldelim(),n},t.decode=function(r,n){r instanceof $Reader||(r=$Reader.create(r));for(var o=n===void 0?r.len:r.pos+n,a=new $root.Data;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;case 3:a.filesize=r.uint64();break;case 4:if(a.blocksizes&&a.blocksizes.length||(a.blocksizes=[]),(i&7)==2)for(var c=r.uint32()+r.pos;r.pos<c;)a.blocksizes.push(r.uint64());else a.blocksizes.push(r.uint64());break;case 5:a.hashType=r.uint64();break;case 6:a.fanout=r.uint64();break;case 7:a.mode=r.uint32();break;case 8:a.mtime=$root.UnixTime.decode(r,r.uint32());break;default:r.skipType(i&7);break}}if(!a.hasOwnProperty("Type"))throw $util.ProtocolError("missing required 'Type'",{instance:a});return a},t.fromObject=function(r){if(r instanceof $root.Data)return r;var n=new $root.Data;switch(r.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?$util.base64.decode(r.Data,n.Data=$util.newBuffer($util.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),r.filesize!=null&&($util.Long?(n.filesize=$util.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?n.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?n.filesize=r.filesize:typeof r.filesize=="object"&&(n.filesize=new $util.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)$util.Long?(n.blocksizes[o]=$util.Long.fromValue(r.blocksizes[o])).unsigned=!0:typeof r.blocksizes[o]=="string"?n.blocksizes[o]=parseInt(r.blocksizes[o],10):typeof r.blocksizes[o]=="number"?n.blocksizes[o]=r.blocksizes[o]:typeof r.blocksizes[o]=="object"&&(n.blocksizes[o]=new $util.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0))}if(r.hashType!=null&&($util.Long?(n.hashType=$util.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?n.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?n.hashType=r.hashType:typeof r.hashType=="object"&&(n.hashType=new $util.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&($util.Long?(n.fanout=$util.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?n.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?n.fanout=r.fanout:typeof r.fanout=="object"&&(n.fanout=new $util.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(n.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=$root.UnixTime.fromObject(r.mtime)}return n},t.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.blocksizes=[]),n.defaults){if(o.Type=n.enums===String?"Raw":0,n.bytes===String?o.Data="":(o.Data=[],n.bytes!==Array&&(o.Data=$util.newBuffer(o.Data))),$util.Long){var a=new $util.Long(0,0,!0);o.filesize=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.filesize=n.longs===String?"0":0;if($util.Long){var a=new $util.Long(0,0,!0);o.hashType=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.hashType=n.longs===String?"0":0;if($util.Long){var a=new $util.Long(0,0,!0);o.fanout=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.fanout=n.longs===String?"0":0;o.mode=0,o.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(o.Type=n.enums===String?$root.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(o.Data=n.bytes===String?$util.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?o.filesize=n.longs===String?String(r.filesize):r.filesize:o.filesize=n.longs===String?$util.Long.prototype.toString.call(r.filesize):n.longs===Number?new $util.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){o.blocksizes=[];for(var i=0;i<r.blocksizes.length;++i)typeof r.blocksizes[i]=="number"?o.blocksizes[i]=n.longs===String?String(r.blocksizes[i]):r.blocksizes[i]:o.blocksizes[i]=n.longs===String?$util.Long.prototype.toString.call(r.blocksizes[i]):n.longs===Number?new $util.LongBits(r.blocksizes[i].low>>>0,r.blocksizes[i].high>>>0).toNumber(!0):r.blocksizes[i]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?o.hashType=n.longs===String?String(r.hashType):r.hashType:o.hashType=n.longs===String?$util.Long.prototype.toString.call(r.hashType):n.longs===Number?new $util.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?o.fanout=n.longs===String?String(r.fanout):r.fanout:o.fanout=n.longs===String?$util.Long.prototype.toString.call(r.fanout):n.longs===Number?new $util.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(o.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(o.mtime=$root.UnixTime.toObject(r.mtime,n)),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t.DataType=function(){const e={},r=Object.create(e);return r[e[0]="Raw"]=0,r[e[1]="Directory"]=1,r[e[2]="File"]=2,r[e[3]="Metadata"]=3,r[e[4]="Symlink"]=4,r[e[5]="HAMTShard"]=5,r}(),t})();$root.UnixTime=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Seconds=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(r,n){return n||(n=$Writer.create()),n.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&n.uint32(21).fixed32(r.FractionalNanoseconds),n},t.decode=function(r,n){r instanceof $Reader||(r=$Reader.create(r));for(var o=n===void 0?r.len:r.pos+n,a=new $root.UnixTime;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:a.Seconds=r.int64();break;case 2:a.FractionalNanoseconds=r.fixed32();break;default:r.skipType(i&7);break}}if(!a.hasOwnProperty("Seconds"))throw $util.ProtocolError("missing required 'Seconds'",{instance:a});return a},t.fromObject=function(r){if(r instanceof $root.UnixTime)return r;var n=new $root.UnixTime;return r.Seconds!=null&&($util.Long?(n.Seconds=$util.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?n.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?n.Seconds=r.Seconds:typeof r.Seconds=="object"&&(n.Seconds=new $util.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=r.FractionalNanoseconds>>>0),n},t.toObject=function(r,n){n||(n={});var o={};if(n.defaults){if($util.Long){var a=new $util.Long(0,0,!1);o.Seconds=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.Seconds=n.longs===String?"0":0;o.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?o.Seconds=n.longs===String?String(r.Seconds):r.Seconds:o.Seconds=n.longs===String?$util.Long.prototype.toString.call(r.Seconds):n.longs===Number?new $util.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(o.FractionalNanoseconds=r.FractionalNanoseconds),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t})();$root.Metadata=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.MimeType="",t.encode=function(r,n){return n||(n=$Writer.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&n.uint32(10).string(r.MimeType),n},t.decode=function(r,n){r instanceof $Reader||(r=$Reader.create(r));for(var o=n===void 0?r.len:r.pos+n,a=new $root.Metadata;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:a.MimeType=r.string();break;default:r.skipType(i&7);break}}return a},t.fromObject=function(r){if(r instanceof $root.Metadata)return r;var n=new $root.Metadata;return r.MimeType!=null&&(n.MimeType=String(r.MimeType)),n},t.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(o.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(o.MimeType=r.MimeType),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t})();function parseMode(t){if(t!=null)return typeof t=="number"?t&4095:(t=t.toString(),t.substring(0,1)==="0"?parseInt(t,8)&4095:parseInt(t,10)&4095)}function parseMtime(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){const r=t.getTime(),n=Math.floor(r/1e3);e={secs:n,nsecs:(r-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw errCode$1(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}async function*normaliseCandidateMultiple(t,e){if(typeof t=="string"||t instanceof String||isBytes(t)||isBlob(t)||t._readableState)throw errCode$1(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(isReadableStream(t)&&(t=browserReadablestreamToIt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const r=itPeekable(t),{value:n,done:o}=await r.peek();if(o){yield*[];return}if(r.push(n),Number.isInteger(n))throw errCode$1(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState){yield*itMap(r,a=>toFileObject$1({content:a},e));return}if(isBytes(n)){yield toFileObject$1({content:r},e);return}if(isFileObject(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||isReadableStream(n)||isBlob(n)){yield*itMap(r,a=>toFileObject$1(a,e));return}}throw isFileObject(t)?errCode$1(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):errCode$1(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function toFileObject$1(t,e){const{path:r,mode:n,mtime:o,content:a}=t,i={path:r||"",mode:parseMode(n),mtime:parseMtime(o)};return a?i.content=await e(a):r||(i.content=await e(t)),i}function normaliseInput$2(t){return normaliseCandidateMultiple(t,normaliseContent$1)}function modeToString(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}async function multipartRequest(t,e,r={}){const n=[],o=new FormData;let a=0,i=0;for await(const{content:c,path:u,mode:l,mtime:f}of normaliseInput$2(t)){let g="";const S=c?"file":"dir";a>0&&(g=`-${a}`);let B=S+g;const $=[];if(l!=null&&$.push(`mode=${modeToString(l)}`),f!=null){const{secs:E,nsecs:P}=f;$.push(`mtime=${E}`),P!=null&&$.push(`mtime-nsecs=${P}`)}if($.length&&(B=`${B}?${$.join("&")}`),c){o.set(B,c,u!=null?encodeURIComponent(u):void 0);const E=i+c.size;n.push({name:u,start:i,end:E}),i=E}else if(u!=null)o.set(B,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");a++}return{total:i,parts:n,headers:r,body:o}}function filter(t){return t.filter(Boolean)}function abortSignal(...t){return anySignal_2(filter(t))}const createPut$3=configure(t=>{async function e(r,n={}){const o=new AbortController$2,a=abortSignal(o.signal,n.signal);let i;try{i=await(await t.post("block/put",T({signal:a,searchParams:toUrlSearchParams(n)},await multipartRequest([r],o,n.headers)))).json()}catch(c){if(n.format==="dag-pb")return e(r,N(T({},n),{format:"protobuf"}));if(n.format==="dag-cbor")return e(r,N(T({},n),{format:"cbor"}));throw c}return CID$4.parse(i.Key)}return e}),createRm$6=configure(t=>{async function*e(r,n={}){Array.isArray(r)||(r=[r]);const o=await t.post("block/rm",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r.map(a=>a.toString()),"stream-channels":!0},n)),headers:n.headers});for await(const a of o.ndjson())yield toCoreInterface$3(a)}return e});function toCoreInterface$3(t){const e={cid:CID$4.parse(t.Hash)};return t.Error&&(e.error=new Error(t.Error)),e}const createStat$3=configure(t=>{async function e(r,n={}){const a=await(await t.post("block/stat",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r.toString()},n)),headers:n.headers})).json();return{cid:CID$4.parse(a.Key),size:a.Size}}return e});function createBlock(t){return{get:createGet$5(t),put:createPut$3(t),rm:createRm$6(t),stat:createStat$3(t)}}const createAdd$4=configure(t=>{async function e(r,n={}){const o=await t.post("bootstrap/add",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers}),{Peers:a}=await o.json();return{Peers:a.map(i=>new src$2.Multiaddr(i))}}return e}),createClear=configure(t=>{async function e(r={}){const n=await t.post("bootstrap/rm",{signal:r.signal,searchParams:toUrlSearchParams(N(T({},r),{all:!0})),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(a=>new src$2.Multiaddr(a))}}return e}),createList$2=configure(t=>{async function e(r={}){const n=await t.post("bootstrap/list",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(a=>new src$2.Multiaddr(a))}}return e}),createReset=configure(t=>{async function e(r={}){const n=await t.post("bootstrap/add",{signal:r.signal,searchParams:toUrlSearchParams(N(T({},r),{default:!0})),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(a=>new src$2.Multiaddr(a))}}return e}),createRm$5=configure(t=>{async function e(r,n={}){const o=await t.post("bootstrap/rm",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers}),{Peers:a}=await o.json();return{Peers:a.map(i=>new src$2.Multiaddr(i))}}return e});function createBootstrap(t){return{add:createAdd$4(t),clear:createClear(t),list:createList$2(t),reset:createReset(t),rm:createRm$5(t)}}const createApply=configure(t=>{async function e(r,n={}){const a=await(await t.post("config/profile/apply",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers})).json();return{original:a.OldCfg,updated:a.NewCfg}}return e});function objectToCamel(t){if(t==null)return t;const e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((n,o)=>(e.test(o)?n[o.toLowerCase()]=t[o]:e.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=t[o]:n[o]=t[o],n),r)}const createList$1=configure(t=>{async function e(r={}){return(await(await t.post("config/profile/list",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).map(a=>objectToCamel(a))}return e});function createProfiles(t){return{apply:createApply(t),list:createList$1(t)}}const createGet$4=configure(t=>async(r,n={})=>{if(!r)throw new Error("key argument is required");return(await(await t.post("config",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers})).json()).Value}),createGetAll=configure(t=>async(r={})=>await(await t.post("config/show",{signal:r.signal,searchParams:toUrlSearchParams(T({},r)),headers:r.headers})).json()),createReplace=configure(t=>async(r,n={})=>{const o=new AbortController$2,a=abortSignal(o.signal,n.signal);await(await t.post("config/replace",T({signal:a,searchParams:toUrlSearchParams(n)},await multipartRequest([fromString$1(JSON.stringify(r))],o,n.headers)))).text()}),createSet=configure(t=>async(r,n,o={})=>{if(typeof r!="string")throw new Error("Invalid key type");const a=T(T({},o),encodeParam(r,n));await(await t.post("config",{signal:o.signal,searchParams:toUrlSearchParams(a),headers:o.headers})).text()}),encodeParam=(t,e)=>{switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}};function createConfig(t){return{getAll:createGetAll(t),get:createGet$4(t),set:createSet(t),replace:createReplace(t),profiles:createProfiles(t)}}const createExport$1=configure(t=>{async function*e(r,n={}){yield*(await t.post("dag/export",{signal:n.signal,searchParams:toUrlSearchParams({arg:r.toString()}),headers:n.headers})).iterator()}return e});async function*resolve(t,e,r,n,o){const a=async l=>{const f=await r.getCodec(l.code),g=await n(l,o);return f.decode(g)},i=e.split("/").filter(Boolean);let c=await a(t),u=t;for(;i.length;){const l=i.shift();if(!l)throw errCode$1(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(c,l))c=c[l],yield{value:c,remainderPath:i.join("/")};else throw errCode$1(new Error(`no link named "${l}" under ${u}`),"ERR_NO_LINK");const f=CID$4.asCID(c);f&&(u=f,c=await a(c))}yield{value:c,remainderPath:""}}const first=async t=>{for await(const e of t)return e};var itFirst=first;const last=async t=>{let e;for await(const r of t)e=r;return e};var itLast=last;const createGet$3=(t,e)=>configure((n,o)=>{const a=createGet$5(o);return async(c,u={})=>{if(u.path){const B=u.localResolve?await itFirst(resolve(c,u.path,t,a,u)):await itLast(resolve(c,u.path,t,a,u));if(!B)throw errCode$1(new Error("Not found"),"ERR_NOT_FOUND");return B}const l=await t.getCodec(c.code),f=await a(c,u);return{value:l.decode(f),remainderPath:""}}})(e),createImport$1=configure(t=>{async function*e(r,n={}){const o=new AbortController$2,a=abortSignal(o.signal,n.signal),{headers:i,body:c}=await multipartRequest(r,o,n.headers),u=await t.post("dag/import",{signal:a,headers:i,body:c,searchParams:toUrlSearchParams({"pin-roots":n.pinRoots})});for await(const{Root:l}of u.ndjson())if(l!==void 0){const{Cid:{"/":f},PinErrorMsg:g}=l;yield{root:{cid:CID$4.parse(f),pinErrorMsg:g}}}}return e}),createPut$2=(t,e)=>configure(n=>async(a,i={})=>{const c=T({storeCodec:"dag-cbor",hashAlg:"sha2-256"},i);let u;if(c.inputCodec){if(!(a instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");u=a}else u=(await t.getCodec(c.storeCodec)).encode(a),c.inputCodec=c.storeCodec;const l=new AbortController$2,f=abortSignal(l.signal,c.signal),S=await(await n.post("dag/put",T({timeout:c.timeout,signal:f,searchParams:toUrlSearchParams(c)},await multipartRequest([u],l,c.headers)))).json();return CID$4.parse(S.Cid["/"])})(e),createResolve$2=configure(t=>async(r,n={})=>{const a=await(await t.post("dag/resolve",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:`${r}${n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`},n)),headers:n.headers})).json();return{cid:CID$4.parse(a.Cid["/"]),remainderPath:a.RemPath}});function createDag(t,e){return{export:createExport$1(e),get:createGet$3(t,e),import:createImport$1(e),put:createPut$2(t,e),resolve:createResolve$2(e)}}const SendingQuery=0,PeerResponse=1,FinalPeer=2,QueryError=3,Provider=4,Value=5,AddingPeer=6,DialingPeer=7,mapEvent=t=>{if(t.Type===SendingQuery)return{to:t.ID,name:"SENDING_QUERY",type:t.Type};if(t.Type===PeerResponse)return{from:t.ID,name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses||[]).map(({ID:e,Addrs:r})=>({id:e,multiaddrs:r.map(n=>new src$2.Multiaddr(n))})),providers:(t.Responses||[]).map(({ID:e,Addrs:r})=>({id:e,multiaddrs:r.map(n=>new src$2.Multiaddr(n))}))};if(t.Type===FinalPeer){let e={id:t.ID,multiaddrs:[]};return t.Responses&&t.Responses.length&&(e={id:t.Responses[0].ID,multiaddrs:t.Responses[0].Addrs.map(r=>new src$2.Multiaddr(r))}),{from:t.ID,name:"FINAL_PEER",type:t.Type,peer:e}}if(t.Type===QueryError)return{from:t.ID,name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(t.Type===Provider)return{from:t.ID,name:"PROVIDER",type:t.Type,providers:t.Responses.map(({ID:e,Addrs:r})=>({id:e,multiaddrs:r.map(n=>new src$2.Multiaddr(n))}))};if(t.Type===Value)return{from:t.ID,name:"VALUE",type:t.Type,value:fromString$1(t.Extra,"base64pad")};if(t.Type===AddingPeer){const e=t.Responses.map(({ID:r})=>r);if(!e.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:e[0]}}if(t.Type===DialingPeer)return{name:"DIALING_PEER",type:t.Type,peer:t.ID};throw new Error("Unknown DHT event type")},createFindPeer=configure(t=>{async function*e(r,n={}){const o=await t.post("dht/findpeer",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers});for await(const a of o.ndjson())yield mapEvent(a)}return e}),createFindProvs=configure(t=>{async function*e(r,n={}){const o=await t.post("dht/findprovs",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r.toString()},n)),headers:n.headers});for await(const a of o.ndjson())yield mapEvent(a)}return e}),createGet$2=configure(t=>{async function*e(r,n={}){const o=await t.post("dht/get",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r instanceof Uint8Array?toString$1(r):r.toString()},n)),headers:n.headers});for await(const a of o.ndjson())yield mapEvent(a)}return e}),createProvide=configure(t=>{async function*e(r,n={recursive:!1}){const o=Array.isArray(r)?r:[r],a=await t.post("dht/provide",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:o.map(i=>i.toString())},n)),headers:n.headers});for await(const i of a.ndjson())yield mapEvent(i)}return e}),createPut$1=configure(t=>{async function*e(r,n,o={}){const a=new AbortController$2,i=abortSignal(a.signal,o.signal),c=await t.post("dht/put",T({signal:i,searchParams:toUrlSearchParams(T({arg:r instanceof Uint8Array?toString$1(r):r.toString()},o))},await multipartRequest([n],a,o.headers)));for await(const u of c.ndjson())yield mapEvent(u)}return e}),createQuery=configure(t=>{async function*e(r,n={}){const o=await t.post("dht/query",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r.toString()},n)),headers:n.headers});for await(const a of o.ndjson())yield mapEvent(a)}return e});function createDht(t){return{findPeer:createFindPeer(t),findProvs:createFindProvs(t),get:createGet$2(t),provide:createProvide(t),put:createPut$1(t),query:createQuery(t)}}const createCmds=configure(t=>{async function e(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()}return e}),createNet=configure(t=>{async function e(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()}return e}),createSys=configure(t=>{async function e(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()}return e});function createDiag(t){return{cmds:createCmds(t),net:createNet(t),sys:createSys(t)}}const createChmod=configure(t=>{async function e(r,n,o={}){await(await t.post("files/chmod",{signal:o.signal,searchParams:toUrlSearchParams(T({arg:r,mode:n},o)),headers:o.headers})).text()}return e}),createCp=configure(t=>{async function e(r,n,o={}){const a=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:o.signal,searchParams:toUrlSearchParams(T({arg:a.concat(n).map(c=>CID$4.asCID(c)?`/ipfs/${c}`:c)},o)),headers:o.headers})).text()}return e}),createFlush=configure(t=>{async function e(r,n={}){if(!r||typeof r!="string")throw new Error("ipfs.files.flush requires a path");const a=await(await t.post("files/flush",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers})).json();return CID$4.parse(a.Cid)}return e});function objectToCamelWithMetadata(t){const e=objectToCamel(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}const createLs$6=configure(t=>{async function*e(r,n={}){if(!r)throw new Error("ipfs.files.ls requires a path");const o=await t.post("files/ls",{signal:n.signal,searchParams:toUrlSearchParams(N(T({arg:CID$4.asCID(r)?`/ipfs/${r}`:r,long:!0},n),{stream:!0})),headers:n.headers});for await(const a of o.ndjson())if("Entries"in a)for(const i of a.Entries||[])yield toCoreInterface$2(objectToCamelWithMetadata(i));else yield toCoreInterface$2(objectToCamelWithMetadata(a))}return e});function toCoreInterface$2(t){return t.hash&&(t.cid=CID$4.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}const createMkdir=configure(t=>{async function e(r,n={}){await(await t.post("files/mkdir",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers})).text()}return e}),createMv=configure(t=>{async function e(r,n,o={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:o.signal,searchParams:toUrlSearchParams(T({arg:r.concat(n)},o)),headers:o.headers})).text()}return e});var source=t=>{if(t[Symbol.asyncIterator])return t;if(t.getReader)return async function*(){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}();throw new Error("unknown stream")};const createRead=configure(t=>{async function*e(r,n={}){const o=await t.post("files/read",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r,count:n.length},n)),headers:n.headers});yield*source(o.body)}return e}),createRm$4=configure(t=>{async function e(r,n={}){const o=await t.post("files/rm",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers}),a=await o.text();if(a!==""){const i=new http.HTTPError(o);throw i.message=a,i}}return e}),createStat$2=configure(t=>{async function e(r,n={}){const a=await(await t.post("files/stat",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers})).json();return a.WithLocality=a.WithLocality||!1,toCoreInterface$1(objectToCamelWithMetadata(a))}return e});function toCoreInterface$1(t){return t.cid=CID$4.parse(t.hash),delete t.hash,t}const createTouch=configure(t=>{async function e(r,n={}){await(await t.post("files/touch",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers})).text()}return e}),createWrite=configure(t=>{async function e(r,n,o={}){const a=new AbortController$2,i=abortSignal(a.signal,o.signal);await(await t.post("files/write",T({signal:i,searchParams:toUrlSearchParams(T({arg:r,streamChannels:!0,count:o.length},o))},await multipartRequest([{content:n,path:"arg",mode:modeToString$1(o.mode),mtime:parseMtime$1(o.mtime)}],a,o.headers)))).text()}return e});function createFiles(t){return{chmod:createChmod(t),cp:createCp(t),flush:createFlush(t),ls:createLs$6(t),mkdir:createMkdir(t),mv:createMv(t),read:createRead(t),rm:createRm$4(t),stat:createStat$2(t),touch:createTouch(t),write:createWrite(t)}}const createExport=configure(t=>async(r,n,o={})=>{throw errCode$1(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createGen=configure(t=>{async function e(r,n={type:"rsa",size:2048}){const a=await(await t.post("key/gen",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers})).json();return objectToCamel(a)}return e}),createImport=configure(t=>{async function e(r,n,o,a={}){const c=await(await t.post("key/import",{signal:a.signal,searchParams:toUrlSearchParams(T({arg:r,pem:n,password:o},a)),headers:a.headers})).json();return objectToCamel(c)}return e}),createInfo=configure(t=>async(r,n={})=>{throw errCode$1(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createList=configure(t=>{async function e(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Keys||[]).map(a=>objectToCamel(a))}return e}),createRename=configure(t=>{async function e(r,n,o={}){const a=await t.post("key/rename",{signal:o.signal,searchParams:toUrlSearchParams(T({arg:[r,n]},o)),headers:o.headers});return objectToCamel(await a.json())}return e}),createRm$3=configure(t=>{async function e(r,n={}){const a=await(await t.post("key/rm",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers})).json();return objectToCamel(a.Keys[0])}return e});function createKey(t){return{export:createExport(t),gen:createGen(t),import:createImport(t),info:createInfo(t),list:createList(t),rename:createRename(t),rm:createRm$3(t)}}const createLevel=configure(t=>{async function e(r,n,o={}){const a=await t.post("log/level",{signal:o.signal,searchParams:toUrlSearchParams(T({arg:[r,n]},o)),headers:o.headers});return objectToCamel(await a.json())}return e}),createLs$5=configure(t=>{async function e(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Strings}return e}),createTail=configure(t=>{async function*e(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).ndjson()}return e});function createLog(t){return{level:createLevel(t),ls:createLs$5(t),tail:createTail(t)}}const createPublish$1=configure(t=>{async function e(r,n={}){const o=await t.post("name/publish",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:`${r}`},n)),headers:n.headers});return objectToCamel(await o.json())}return e}),createResolve$1=configure(t=>{async function*e(r,n={}){const o=await t.post("name/resolve",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r,stream:!0},n)),headers:n.headers});for await(const a of o.ndjson())yield a.Path}return e}),createCancel=configure(t=>{async function e(r,n={}){const o=await t.post("name/pubsub/cancel",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers});return objectToCamel(await o.json())}return e}),createState=configure(t=>{async function e(r={}){const n=await t.post("name/pubsub/state",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers});return objectToCamel(await n.json())}return e}),createSubs=configure(t=>{async function e(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Strings||[]}return e});function createPubsub$1(t){return{cancel:createCancel(t),state:createState(t),subs:createSubs(t)}}function createName(t){return{publish:createPublish$1(t),resolve:createResolve$1(t),pubsub:createPubsub$1(t)}}const createData=configure(t=>{async function e(r,n={}){const a=await(await t.post("object/data",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:`${r instanceof Uint8Array?CID$4.decode(r):r}`},n)),headers:n.headers})).arrayBuffer();return new Uint8Array(a,0,a.byteLength)}return e}),createGet$1=configure(t=>{async function e(r,n={}){const a=await(await t.post("object/get",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:`${r instanceof Uint8Array?CID$4.decode(r):r}`,dataEncoding:"base64"},n)),headers:n.headers})).json();return{Data:fromString$1(a.Data,"base64pad"),Links:(a.Links||[]).map(i=>({Name:i.Name,Hash:CID$4.parse(i.Hash),Tsize:i.Size}))}}return e}),createLinks=configure(t=>{async function e(r,n={}){return((await(await t.post("object/links",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:`${r instanceof Uint8Array?CID$4.decode(r):r}`},n)),headers:n.headers})).json()).Links||[]).map(i=>({Name:i.Name,Tsize:i.Size,Hash:CID$4.parse(i.Hash)}))}return e}),createNew=configure(t=>{async function e(r={}){const n=await t.post("object/new",{signal:r.signal,searchParams:toUrlSearchParams(T({arg:r.template},r)),headers:r.headers}),{Hash:o}=await n.json();return CID$4.parse(o)}return e}),createPut=(t,e)=>configure(n=>{const o=createPut$2(t,e);async function a(i,c={}){return o(i,N(T({},c),{storeCodec:"dag-pb",hashAlg:"sha2-256",version:1}))}return a})(e),createStat$1=configure(t=>{async function e(r,n={}){const a=await(await t.post("object/stat",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:`${r}`},n)),headers:n.headers})).json();return N(T({},a),{Hash:CID$4.parse(a.Hash)})}return e}),createAddLink=configure(t=>{async function e(r,n,o={}){const a=await t.post("object/patch/add-link",{signal:o.signal,searchParams:toUrlSearchParams(T({arg:[`${r}`,n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null]},o)),headers:o.headers}),{Hash:i}=await a.json();return CID$4.parse(i)}return e}),createAppendData=configure(t=>{async function e(r,n,o={}){const a=new AbortController$2,i=abortSignal(a.signal,o.signal),c=await t.post("object/patch/append-data",T({signal:i,searchParams:toUrlSearchParams(T({arg:`${r}`},o))},await multipartRequest([n],a,o.headers))),{Hash:u}=await c.json();return CID$4.parse(u)}return e}),createRmLink=configure(t=>{async function e(r,n,o={}){const a=await t.post("object/patch/rm-link",{signal:o.signal,searchParams:toUrlSearchParams(T({arg:[`${r}`,n.Name||n.name||null]},o)),headers:o.headers}),{Hash:i}=await a.json();return CID$4.parse(i)}return e}),createSetData=configure(t=>{async function e(r,n,o={}){const a=new AbortController$2,i=abortSignal(a.signal,o.signal),c=await t.post("object/patch/set-data",T({signal:i,searchParams:toUrlSearchParams(T({arg:[`${r}`]},o))},await multipartRequest([n],a,o.headers))),{Hash:u}=await c.json();return CID$4.parse(u)}return e});function createPatch(t){return{addLink:createAddLink(t),appendData:createAppendData(t),rmLink:createRmLink(t),setData:createSetData(t)}}function createObject(t,e){return{data:createData(e),get:createGet$1(e),links:createLinks(e),new:createNew(e),put:createPut(t,e),stat:createStat$1(e),patch:createPatch(e)}}async function*normaliseInput$1(t){if(t==null)throw errCode$1(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");const e=CID$4.asCID(t);if(e){yield toPin$1({cid:e});return}if(t instanceof String||typeof t=="string"){yield toPin$1({path:t});return}if(t.cid!=null||t.path!=null)return yield toPin$1(t);if(Symbol.iterator in t){const r=t[Symbol.iterator](),n=r.next();if(n.done)return r;if(CID$4.asCID(n.value)||n.value instanceof String||typeof n.value=="string"){yield toPin$1({cid:n.value});for(const o of r)yield toPin$1({cid:o});return}if(n.value.cid!=null||n.value.path!=null){yield toPin$1(n.value);for(const o of r)yield toPin$1(o);return}throw errCode$1(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in t){const r=t[Symbol.asyncIterator](),n=await r.next();if(n.done)return r;if(CID$4.asCID(n.value)||n.value instanceof String||typeof n.value=="string"){yield toPin$1({cid:n.value});for await(const o of r)yield toPin$1({cid:o});return}if(n.value.cid!=null||n.value.path!=null){yield toPin$1(n.value);for await(const o of r)yield toPin$1(o);return}throw errCode$1(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}throw errCode$1(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}function toPin$1(t){const e=t.cid||`${t.path}`;if(!e)throw errCode$1(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),r}const createAddAll$1=configure(t=>{async function*e(r,n={}){for await(const{path:o,recursive:a,metadata:i}of normaliseInput$1(r)){const c=await t.post("pin/add",{signal:n.signal,searchParams:toUrlSearchParams(N(T({},n),{arg:o,recursive:a,metadata:i?JSON.stringify(i):void 0,stream:!0})),headers:n.headers});for await(const u of c.ndjson()){if(u.Pins){for(const l of u.Pins)yield CID$4.parse(l);continue}yield CID$4.parse(u)}}}return e});function createAdd$3(t){const e=createAddAll$1(t);return configure(()=>{async function r(n,o={}){return itLast(e([T({path:n},o)],o))}return r})(t)}function toPin(t,e,r){const n={type:t,cid:CID$4.parse(e)};return r&&(n.metadata=r),n}const createLs$4=configure(t=>{async function*e(r={}){let n=[];r.paths&&(n=Array.isArray(r.paths)?r.paths:[r.paths]);const o=await t.post("pin/ls",{signal:r.signal,searchParams:toUrlSearchParams(N(T({},r),{arg:n.map(a=>`${a}`),stream:!0})),headers:r.headers});for await(const a of o.ndjson()){if(a.Keys){for(const i of Object.keys(a.Keys))yield toPin(a.Keys[i].Type,i,a.Keys[i].Metadata);return}yield toPin(a.Type,a.Cid,a.Metadata)}}return e}),createRmAll$1=configure(t=>{async function*e(r,n={}){for await(const{path:o,recursive:a}of normaliseInput$1(r)){const i=new URLSearchParams(n.searchParams);i.append("arg",`${o}`),a!=null&&i.set("recursive",String(a));const c=await t.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:toUrlSearchParams(N(T({},n),{arg:`${o}`,recursive:a}))});for await(const u of c.ndjson()){if(u.Pins){yield*u.Pins.map(l=>CID$4.parse(l));continue}yield CID$4.parse(u)}}}return e}),createRm$2=t=>{const e=createRmAll$1(t);return configure(()=>{async function r(n,o={}){return itLast(e([T({path:n},o)],o))}return r})(t)},decodePin=({Name:t,Status:e,Cid:r})=>({cid:CID$4.parse(r),name:t,status:e}),encodeService=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},encodeCID=t=>{if(CID$4.asCID(t))return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},encodeQuery=({service:t,cid:e,name:r,status:n,all:o})=>{const a=toUrlSearchParams({service:encodeService(t),name:r,force:o?!0:void 0});if(e)for(const i of e)a.append("cid",encodeCID(i));if(n)for(const i of n)a.append("status",i);return a},encodeAddParams=({cid:t,service:e,background:r,name:n,origins:o})=>{const a=toUrlSearchParams({arg:encodeCID(t),service:encodeService(e),name:n,background:r?!0:void 0});if(o)for(const i of o)a.append("origin",i.toString());return a};function createAdd$2(t){async function e(r,c){var u=c,{timeout:n,signal:o,headers:a}=u,i=O(u,["timeout","signal","headers"]);const l=await t.post("pin/remote/add",{timeout:n,signal:o,headers:a,searchParams:encodeAddParams(T({cid:r},i))});return decodePin(await l.json())}return e}function createLs$3(t){async function*e(i){var c=i,{timeout:r,signal:n,headers:o}=c,a=O(c,["timeout","signal","headers"]);const u=await t.post("pin/remote/ls",{timeout:r,signal:n,headers:o,searchParams:encodeQuery(a)});for await(const l of u.ndjson())yield decodePin(l)}return e}function createRm$1(t){async function e(i){var c=i,{timeout:r,signal:n,headers:o}=c,a=O(c,["timeout","signal","headers"]);await t.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:encodeQuery(N(T({},a),{all:!1}))})}return e}function createRmAll(t){async function e(i){var c=i,{timeout:r,signal:n,headers:o}=c,a=O(c,["timeout","signal","headers"]);await t.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:encodeQuery(N(T({},a),{all:!0}))})}return e}function encodeEndpoint(t){const e=String(t);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function decodeRemoteService(t){return T({service:t.Service,endpoint:new URL(t.ApiEndpoint)},t.Stat&&{stat:decodeStat(t.Stat)})}function decodeStat(t){switch(t.Status){case"valid":{const{Pinning:e,Pinned:r,Queued:n,Failed:o}=t.PinCount;return{status:"valid",pinCount:{queued:n,pinning:e,pinned:r,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function createAdd$1(t){async function e(r,n){const{endpoint:o,key:a,headers:i,timeout:c,signal:u}=n;await t.post("pin/remote/service/add",{timeout:c,signal:u,searchParams:toUrlSearchParams({arg:[r,encodeEndpoint(o),a]}),headers:i})}return e}function createLs$2(t){async function e(r={}){const{stat:n,headers:o,timeout:a,signal:i}=r,c=await t.post("pin/remote/service/ls",{timeout:a,signal:i,headers:o,searchParams:n===!0?toUrlSearchParams({stat:n}):void 0}),{RemoteServices:u}=await c.json();return u.map(decodeRemoteService)}return e}function createRm(t){async function e(r,n={}){await t.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:toUrlSearchParams({arg:r})})}return e}function createService(t){const e=new Client(t);return{add:createAdd$1(e),ls:createLs$2(e),rm:createRm(e)}}function createRemote(t){const e=new Client(t);return{add:createAdd$2(e),ls:createLs$3(e),rm:createRm$1(e),rmAll:createRmAll(e),service:createService(t)}}function createPin(t){return{addAll:createAddAll$1(t),add:createAdd$3(t),ls:createLs$4(t),rmAll:createRmAll$1(t),rm:createRm$2(t),remote:createRemote(t)}}const rpcArrayToTextArray=t=>Array.isArray(t)?t.map(rpcToText):t,rpcToText=t=>toString$1(rpcToBytes(t)),rpcToBytes=t=>base64url.decode(t),textToUrlSafeRpc=t=>base64url.encode(fromString$1(t)),createLs$1=configure(t=>{async function e(r={}){const{Strings:n}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json();return rpcArrayToTextArray(n)||[]}return e}),createPeers$1=configure(t=>{async function e(r,n={}){const o=await t.post("pubsub/peers",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:textToUrlSafeRpc(r)},n)),headers:n.headers}),{Strings:a}=await o.json();return a||[]}return e}),createPublish=configure(t=>{async function e(r,n,o={}){const a=toUrlSearchParams(T({arg:textToUrlSafeRpc(r)},o)),i=new AbortController$2,c=abortSignal(i.signal,o.signal);await(await t.post("pubsub/pub",T({signal:c,searchParams:a},await multipartRequest([n],i,o.headers)))).text()}return e}),log=debug("ipfs-http-client:pubsub:subscribe"),createSubscribe=(t,e)=>configure(r=>{async function n(o,a,i={}){i.signal=e.subscribe(o,a,i.signal);let c,u;const l=new Promise((g,S)=>{c=g,u=S}),f=setTimeout(()=>c(),1e3);return r.post("pubsub/sub",{signal:i.signal,searchParams:toUrlSearchParams(T({arg:textToUrlSafeRpc(o)},i)),headers:i.headers}).catch(g=>{e.unsubscribe(o,a),u(g)}).then(g=>{clearTimeout(f),!!g&&(readMessages(g,{onMessage:a,onEnd:()=>e.unsubscribe(o,a),onError:i.onError}),c())}),l}return n})(t);async function readMessages(t,{onMessage:e,onEnd:r,onError:n}){n=n||log;try{for await(const o of t.ndjson())try{if(!o.from)continue;e({from:o.from,data:rpcToBytes(o.data),seqno:rpcToBytes(o.seqno),topicIDs:rpcArrayToTextArray(o.topicIDs)})}catch(a){a.message=`Failed to parse pubsub message: ${a.message}`,n(a,!1,o)}}catch(o){isAbortError(o)||n(o,!0)}finally{r()}}const isAbortError=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}},createUnsubscribe=(t,e)=>{async function r(n,o){e.unsubscribe(n,o)}return r};class SubscriptionTracker{constructor(){this._subs=new Map}subscribe(e,r,n){const o=this._subs.get(e)||[];if(o.find(i=>i.handler===r))throw new Error(`Already subscribed to ${e} with this handler`);const a=new AbortController$2;return this._subs.set(e,[{handler:r,controller:a}].concat(o)),n&&n.addEventListener("abort",()=>this.unsubscribe(e,r)),a.signal}unsubscribe(e,r){const n=this._subs.get(e)||[];let o;r?(this._subs.set(e,n.filter(a=>a.handler!==r)),o=n.filter(a=>a.handler===r)):(this._subs.set(e,[]),o=n),(this._subs.get(e)||[]).length||this._subs.delete(e),o.forEach(a=>a.controller.abort())}}function createPubsub(t){const e=new SubscriptionTracker;return{ls:createLs$1(t),peers:createPeers$1(t),publish:createPublish(t),subscribe:createSubscribe(t,e),unsubscribe:createUnsubscribe(t,e)}}const createLocal=configure(t=>{async function*e(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:objectToCamel,searchParams:toUrlSearchParams(r),headers:r.headers})).ndjson()}return e}),createRefs=configure((t,e)=>Object.assign(async function*(n,o={}){const a=Array.isArray(n)?n:[n];yield*(await t.post("refs",{signal:o.signal,searchParams:toUrlSearchParams(T({arg:a.map(c=>`${c instanceof Uint8Array?CID$4.decode(c):c}`)},o)),headers:o.headers,transform:objectToCamel})).ndjson()},{local:createLocal(e)})),createGc=configure(t=>{async function*e(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers,transform:o=>({err:o.Error?new Error(o.Error):null,cid:(o.Key||{})["/"]?CID$4.parse(o.Key["/"]):null})})).ndjson()}return e}),createStat=configure(t=>{async function e(r={}){const o=await(await t.post("repo/stat",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}return e}),createVersion$1=configure(t=>{async function e(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Version}return e});function createRepo(t){return{gc:createGc(t),stat:createStat(t),version:createVersion$1(t)}}const createBw=configure(t=>{async function*e(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}return e});function createStats(t){return{bitswap:createStat$4(t),repo:createStat(t),bw:createBw(t)}}const createAddrs=configure(t=>{async function e(r={}){const n=await t.post("swarm/addrs",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(a=>({id:a,addrs:(o[a]||[]).map(i=>new src$2.Multiaddr(i))}))}return e}),createConnect=configure(t=>{async function e(r,n={}){const o=await t.post("swarm/connect",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers}),{Strings:a}=await o.json();return a||[]}return e}),createDisconnect=configure(t=>{async function e(r,n={}){const o=await t.post("swarm/disconnect",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers}),{Strings:a}=await o.json();return a||[]}return e}),createLocalAddrs=configure(t=>{async function e(r={}){const n=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Strings:o}=await n.json();return(o||[]).map(a=>new src$2.Multiaddr(a))}return e}),createPeers=configure(t=>{async function e(r={}){const n=await t.post("swarm/peers",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Peers:o}=await n.json();return(o||[]).map(a=>({addr:new src$2.Multiaddr(a.Addr),peer:a.Peer,muxer:a.Muxer,latency:a.Latency,streams:a.Streams,direction:a.Direction==null?void 0:a.Direction===0?"inbound":"outbound"}))}return e});function createSwarm(t){return{addrs:createAddrs(t),connect:createConnect(t),disconnect:createDisconnect(t),localAddrs:createLocalAddrs(t),peers:createPeers(t)}}const createAddAll=configure(t=>{async function*e(r,n={}){const o=new AbortController$2,a=abortSignal(o.signal,n.signal),{headers:i,body:c,total:u,parts:l}=await multipartRequest(r,o,n.headers),[f,g]=typeof n.progress=="function"?createProgressHandler(u,l,n.progress):[void 0,void 0],S=await t.post("add",{searchParams:toUrlSearchParams(N(T({"stream-channels":!0},n),{progress:Boolean(f)})),onUploadProgress:g,signal:a,headers:i,body:c});for await(let B of S.ndjson())B=objectToCamel(B),B.hash!==void 0?yield toCoreInterface(B):f&&f(B.bytes||0,B.name)}return e}),createProgressHandler=(t,e,r)=>e?[void 0,createOnUploadProgress(t,e,r)]:[r,void 0],createOnUploadProgress=(t,e,r)=>{let n=0;const o=e.length;return({loaded:a,total:i})=>{const c=Math.floor(a/i*t);for(;n<o;){const{start:u,end:l,name:f}=e[n];if(c<l){r(c-u,f);break}else r(l-u,f),n+=1}}};function toCoreInterface({name:t,hash:e,size:r,mode:n,mtime:o,mtimeNsecs:a}){const i={path:t,cid:CID$4.parse(e),size:parseInt(r)};return n!=null&&(i.mode=parseInt(n,8)),o!=null&&(i.mtime={secs:o,nsecs:a||0}),i}const browserReadableStreamToIt=browserReadablestreamToIt;function blobToIt(t){return typeof t.stream=="function"?browserReadableStreamToIt(t.stream()):browserReadableStreamToIt(new Response(t).body)}var blobToIt_1=blobToIt;async function*toAsyncIterable(t){yield t}async function normaliseContent(t){if(isBytes(t))return toAsyncIterable(toBytes(t));if(typeof t=="string"||t instanceof String)return toAsyncIterable(toBytes(t.toString()));if(isBlob(t))return blobToIt_1(t);if(isReadableStream(t)&&(t=browserReadablestreamToIt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=itPeekable(t),{value:r,done:n}=await e.peek();if(n)return toAsyncIterable(new Uint8Array(0));if(e.push(r),Number.isInteger(r))return toAsyncIterable(Uint8Array.from(await itAll(e)));if(isBytes(r)||typeof r=="string"||r instanceof String)return itMap(e,toBytes)}throw errCode$1(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}function toBytes(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?Uint8Array.from(t):fromString$1(t.toString())}async function*normaliseCandidateSingle(t,e){if(t==null)throw errCode$1(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if(typeof t=="string"||t instanceof String){yield toFileObject(t.toString(),e);return}if(isBytes(t)||isBlob(t)){yield toFileObject(t,e);return}if(isReadableStream(t)&&(t=browserReadablestreamToIt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const r=itPeekable(t),{value:n,done:o}=await r.peek();if(o){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||isBytes(n)||typeof n=="string"||n instanceof String){yield toFileObject(r,e);return}throw errCode$1(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(isFileObject(t)){yield toFileObject(t,e);return}throw errCode$1(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function toFileObject(t,e){const{path:r,mode:n,mtime:o,content:a}=t,i={path:r||"",mode:parseMode(n),mtime:parseMtime(o)};return a?i.content=await e(a):r||(i.content=await e(t)),i}function normaliseInput(t){return normaliseCandidateSingle(t,normaliseContent)}function createAdd(t){const e=createAddAll(t);return configure(()=>{async function r(n,o={}){return await itLast(e(normaliseInput(n),o))}return r})(t)}const createCat=configure(t=>{async function*e(r,n={}){yield*(await t.post("cat",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r.toString()},n)),headers:n.headers})).iterator()}return e}),createCommands=configure(t=>async(r={})=>(await t.post("commands",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()),createDns=configure(t=>async(r,n={})=>(await(await t.post("dns",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers})).json()).Path),createGetEndpointConfig=configure(t=>()=>{const e=new URL(t.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}}),createGet=configure(t=>{async function*e(r,n={}){const o=T({arg:`${r instanceof Uint8Array?CID$4.decode(r):r}`},n);o.compressionLevel&&(o["compression-level"]=o.compressionLevel,delete o.compressionLevel),yield*(await t.post("get",{signal:n.signal,searchParams:toUrlSearchParams(o),headers:n.headers})).iterator()}return e}),createId=configure(t=>{async function e(r={}){const o=await(await t.post("id",{signal:r.signal,searchParams:toUrlSearchParams(T({arg:r.peerId?r.peerId.toString():void 0},r)),headers:r.headers})).json(),a=T({},objectToCamel(o));return a.addresses&&(a.addresses=a.addresses.map(i=>new src$2.Multiaddr(i))),a}return e}),createIsOnline=t=>{const e=createId(t);async function r(n={}){const o=await e(n);return Boolean(o&&o.addresses&&o.addresses.length)}return r},createLs=configure((t,e)=>{async function*r(n,o={}){const a=`${n instanceof Uint8Array?CID$4.decode(n):n}`;async function i(u){let l=u.Hash;if(l.includes("/")){const g=l.startsWith("/ipfs/")?l:`/ipfs/${l}`;l=(await createStat$2(e)(g)).cid}else l=CID$4.parse(l);const f={name:u.Name,path:a+(u.Name?`/${u.Name}`:""),size:u.Size,cid:l,type:typeOf(u)};return u.Mode&&(f.mode=parseInt(u.Mode,8)),u.Mtime!==void 0&&u.Mtime!==null&&(f.mtime={secs:u.Mtime},u.MtimeNsecs!==void 0&&u.MtimeNsecs!==null&&(f.mtime.nsecs=u.MtimeNsecs)),f}const c=await t.post("ls",{signal:o.signal,searchParams:toUrlSearchParams(T({arg:a},o)),headers:o.headers});for await(let u of c.ndjson()){if(u=u.Objects,!u)throw new Error("expected .Objects in results");if(u=u[0],!u)throw new Error("expected one array in results.Objects");const l=u.Links;if(!Array.isArray(l))throw new Error("expected one array in results.Objects[0].Links");if(!l.length){yield i(u);return}yield*l.map(i)}}return r});function typeOf(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}const createMount=configure(t=>{async function e(r={}){const n=await t.post("dns",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers});return objectToCamel(await n.json())}return e}),createPing=configure(t=>{async function*e(r,n={}){yield*(await t.post("ping",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:`${r}`},n)),headers:n.headers,transform:objectToCamel})).ndjson()}return e}),createResolve=configure(t=>{async function e(r,n={}){const o=await t.post("resolve",{signal:n.signal,searchParams:toUrlSearchParams(T({arg:r},n)),headers:n.headers}),{Path:a}=await o.json();return a}return e}),createStart=configure(t=>async(r={})=>{throw errCode$1(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createStop=configure(t=>{async function e(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).text()}return e}),createVersion=configure(t=>{async function e(r={}){const n=await t.post("version",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers});return N(T({},objectToCamel(await n.json())),{"ipfs-http-client":"1.0.0"})}return e});function create(t={}){const e={name:identity$1.name,code:identity$1.code,encode:l=>l,decode:l=>l},r=Object.values(bases);(t.ipld&&t.ipld.bases?t.ipld.bases:[]).forEach(l=>r.push(l));const n=new Multibases({bases:r,loadBase:t.ipld&&t.ipld.loadBase}),o=Object.values(codecs);[dagPB,dagCBOR,dagJSON,e].concat(t.ipld&&t.ipld.codecs||[]).forEach(l=>o.push(l));const a=new Multicodecs({codecs:o,loadCodec:t.ipld&&t.ipld.loadCodec}),i=Object.values(hashes);(t.ipld&&t.ipld.hashers?t.ipld.hashers:[]).forEach(l=>i.push(l));const c=new Multihashes({hashers:i,loadHasher:t.ipld&&t.ipld.loadHasher});return{add:createAdd(t),addAll:createAddAll(t),bitswap:createBitswap(t),block:createBlock(t),bootstrap:createBootstrap(t),cat:createCat(t),commands:createCommands(t),config:createConfig(t),dag:createDag(a,t),dht:createDht(t),diag:createDiag(t),dns:createDns(t),files:createFiles(t),get:createGet(t),getEndpointConfig:createGetEndpointConfig(t),id:createId(t),isOnline:createIsOnline(t),key:createKey(t),log:createLog(t),ls:createLs(t),mount:createMount(t),name:createName(t),object:createObject(a,t),pin:createPin(t),ping:createPing(t),pubsub:createPubsub(t),refs:createRefs(t),repo:createRepo(t),resolve:createResolve(t),start:createStart(t),stats:createStats(t),stop:createStop(t),swarm:createSwarm(t),version:createVersion(t),bases:n,codecs:a,hashers:c}}const mintJson=[{description:"It's actually a bison?",external_url:"https://austingriffith.com/portfolio/paintings/",image:"https://austingriffith.com/images/paintings/buffalo.jpg",name:"Buffalo",attributes:[{trait_type:"BackgroundColor",value:"green"},{trait_type:"Eyes",value:"googly"},{trait_type:"Stamina",value:42}]},{description:"What is it so worried about?",external_url:"https://austingriffith.com/portfolio/paintings/",image:"https://austingriffith.com/images/paintings/zebra.jpg",name:"Zebra",attributes:[{trait_type:"BackgroundColor",value:"blue"},{trait_type:"Eyes",value:"googly"},{trait_type:"Stamina",value:38}]},{description:"What a horn!",external_url:"https://austingriffith.com/portfolio/paintings/",image:"https://austingriffith.com/images/paintings/rhino.jpg",name:"Rhino",attributes:[{trait_type:"BackgroundColor",value:"pink"},{trait_type:"Eyes",value:"googly"},{trait_type:"Stamina",value:22}]},{description:"Is that an underbyte?",external_url:"https://austingriffith.com/portfolio/paintings/",image:"https://austingriffith.com/images/paintings/fish.jpg",name:"Fish",attributes:[{trait_type:"BackgroundColor",value:"blue"},{trait_type:"Eyes",value:"googly"},{trait_type:"Stamina",value:15}]},{description:"So delicate.",external_url:"https://austingriffith.com/portfolio/paintings/",image:"https://austingriffith.com/images/paintings/flamingo.jpg",name:"Flamingo",attributes:[{trait_type:"BackgroundColor",value:"black"},{trait_type:"Eyes",value:"googly"},{trait_type:"Stamina",value:6}]},{description:"Raaaar!",external_url:"https://austingriffith.com/portfolio/paintings/",image:"https://austingriffith.com/images/paintings/godzilla.jpg",name:"Godzilla",attributes:[{trait_type:"BackgroundColor",value:"orange"},{trait_type:"Eyes",value:"googly"},{trait_type:"Stamina",value:99}]}],ipfs=create({host:"ipfs.infura.io",port:5001,protocol:"https"}),getFromIPFS=async t=>{const e=new TextDecoder;let r="";for await(const n of ipfs.cat(t))r+=e.decode(n);return r},YourCollectibles=t=>{const e=useEthersContext(),r=useAppContracts(),n=useContractLoader(r),o=useContractLoader(r,e==null?void 0:e.signer),{mainnetProvider:a,blockExplorer:i,tx:c}=t,u=n.YourCollectible,l=o.YourCollectible,f=useContractReader(u,{contractName:"YourCollectible",functionName:"balanceOf",functionArgs:[e.account]});console.log("balance",f);const[g,S]=react.exports.useState([]),[B,$]=react.exports.useState(!1),[E,P]=react.exports.useState({});react.exports.useEffect(()=>{(async()=>{var I,k,D;const v=[];if(!f)return;const x=(k=(I=f[0])==null?void 0:I.toNumber())!=null?k:0;for(let L=0;L<x;L++)try{console.log("Getting token index",L);const U=await u.tokenOfOwnerByIndex((D=e.account)!=null?D:"",L);console.log("tokenId",U);const z=await u.tokenURI(U);console.log("tokenURI",z);const F=z.replace("https://ipfs.io/ipfs/","");console.log("ipfsHash",F);const G=await getFromIPFS(F);try{const j=JSON.parse(G);console.log("ipfsObject",j),v.push(T({id:U,uri:z,owner:e.account},j))}catch(j){console.log(j)}}catch(U){console.log(U)}S(v)})()},[e.account,f]);const[A,_]=react.exports.useState(0),R=async()=>{if(!c||!e.account)return;const C=await ipfs.add(JSON.stringify(mintJson[A]));_(A+1),console.log("Uploaded Hash: ",C),await c(l.mintItem(e.account,C.path),v=>{console.log("\u{1F4E1} Transaction Update:",v),v&&(v.status==="confirmed"||v.status===1)&&(console.log(" \u{1F37E} Transaction "+v.hash+" finished!"),console.log(" \u26FD\uFE0F "+v.gasUsed+"/"+(v.gasLimit||v.gas)+" @ "+parseFloat(v.gasPrice)/1e9+" gwei"))})};return jsxs(Fragment,{children:[jsx("div",{style:{width:640,margin:"auto",marginTop:32,paddingBottom:32},children:jsx(Button,{disabled:B||A>=mintJson.length-1,shape:"round",size:"large",onClick:async()=>{$(!0),await R(),$(!1)},children:"MINT NFT"})}),jsx("div",{style:{width:640,margin:"auto",marginTop:32,paddingBottom:32},children:jsx(List,{bordered:!0,dataSource:g,renderItem:C=>{const v=C.id.toNumber();return jsxs(List.Item,{children:[jsxs(Card,{title:jsxs("div",{children:[jsxs("span",{style:{fontSize:16,marginRight:8},children:["#",v]})," ",C.name]}),children:[jsx("div",{children:jsx("img",{src:C.image,style:{maxWidth:150}})}),jsx("div",{children:C.description})]}),jsxs("div",{children:["owner:"," ",jsx(Address,{address:C.owner,ensProvider:a,blockExplorer:i,fontSize:16}),jsx(AddressInput,{ensProvider:a,placeholder:"transfer to address",address:E[v],onChange:x=>{P(N(T({},E),{[v]:x}))}}),jsx(Button,{onClick:()=>{!e.account||!c||c(l.transferFrom(e.account,E[v],v))},children:"Transfer"})]})]},v+"_"+C.uri+"_"+C.owner)}})})]})};export{YourCollectibles};
